!function(e){function r(e){var r=require("./"+e+"."+o+".hot-update.js");!function(e,r){if(!w[e]||!g[e])return;for(var t in g[e]=!1,r)Object.prototype.hasOwnProperty.call(r,t)&&(h[t]=r[t]);0==--v&&0===m&&j()}(r.id,r.modules)}var t,n=!0,o="95c6816603f0acb6af71",s={},i=[],c=[];function a(e){var r=_[e];if(!r)return D;var n=function(n){return r.hot.active?(_[n]?-1===_[n].parents.indexOf(e)&&_[n].parents.push(e):(i=[e],t=n),-1===r.children.indexOf(n)&&r.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),i=[]),D(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return D[e]},set:function(r){D[e]=r}}};for(var s in D)Object.prototype.hasOwnProperty.call(D,s)&&"e"!==s&&"t"!==s&&Object.defineProperty(n,s,o(s));return n.e=function(e){return"ready"===u&&p("prepare"),m++,D.e(e).then(r,function(e){throw r(),e});function r(){m--,"prepare"===u&&(b[e]||E(e),0===m&&0===v&&j())}},n.t=function(e,r){return 1&r&&(e=n(e)),D.t(e,-2&r)},n}function d(e){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==e,active:!0,accept:function(e,t){if(void 0===e)r._selfAccepted=!0;else if("function"==typeof e)r._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)r._acceptedDependencies[e[n]]=t||function(){};else r._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)r._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)r._declinedDependencies[e[t]]=!0;else r._declinedDependencies[e]=!0},dispose:function(e){r._disposeHandlers.push(e)},addDisposeHandler:function(e){r._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=r._disposeHandlers.indexOf(e);t>=0&&r._disposeHandlers.splice(t,1)},check:O,apply:P,status:function(e){if(!e)return u;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var r=l.indexOf(e);r>=0&&l.splice(r,1)},data:s[e]};return t=void 0,r}var l=[],u="idle";function p(e){u=e;for(var r=0;r<l.length;r++)l[r].call(null,e)}var f,h,y,v=0,m=0,b={},g={},w={};function x(e){return+e+""===e?+e:e}function O(e){if("idle"!==u)throw new Error("check() is only allowed in idle status");return n=e,p("check"),function(){try{var e=require("./"+o+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return p("idle"),null;g={},b={},w=e.c,y=e.h,p("prepare");var r=new Promise(function(e,r){f={resolve:e,reject:r}});h={};return E(0),"prepare"===u&&0===m&&0===v&&j(),r})}function E(e){w[e]?(g[e]=!0,v++,r(e)):b[e]=!0}function j(){p("ready");var e=f;if(f=null,e)if(n)Promise.resolve().then(function(){return P(n)}).then(function(r){e.resolve(r)},function(r){e.reject(r)});else{var r=[];for(var t in h)Object.prototype.hasOwnProperty.call(h,t)&&r.push(x(t));e.resolve(r)}}function P(r){if("ready"!==u)throw new Error("apply() is only allowed in ready status");var t,n,c,a,d;function l(e){for(var r=[e],t={},n=r.slice().map(function(e){return{chain:[e],id:e}});n.length>0;){var o=n.pop(),s=o.id,i=o.chain;if((a=_[s])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:s};if(a.hot._main)return{type:"unaccepted",chain:i,moduleId:s};for(var c=0;c<a.parents.length;c++){var d=a.parents[c],l=_[d];if(l){if(l.hot._declinedDependencies[s])return{type:"declined",chain:i.concat([d]),moduleId:s,parentId:d};-1===r.indexOf(d)&&(l.hot._acceptedDependencies[s]?(t[d]||(t[d]=[]),f(t[d],[s])):(delete t[d],r.push(d),n.push({chain:i.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:r,outdatedDependencies:t}}function f(e,r){for(var t=0;t<r.length;t++){var n=r[t];-1===e.indexOf(n)&&e.push(n)}}r=r||{};var v={},m=[],b={},g=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var O in h)if(Object.prototype.hasOwnProperty.call(h,O)){var E;d=x(O);var j=!1,P=!1,A=!1,S="";switch((E=h[O]?l(d):{type:"disposed",moduleId:O}).chain&&(S="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":r.onDeclined&&r.onDeclined(E),r.ignoreDeclined||(j=new Error("Aborted because of self decline: "+E.moduleId+S));break;case"declined":r.onDeclined&&r.onDeclined(E),r.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+S));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(E),r.ignoreUnaccepted||(j=new Error("Aborted because "+d+" is not accepted"+S));break;case"accepted":r.onAccepted&&r.onAccepted(E),P=!0;break;case"disposed":r.onDisposed&&r.onDisposed(E),A=!0;break;default:throw new Error("Unexception type "+E.type)}if(j)return p("abort"),Promise.reject(j);if(P)for(d in b[d]=h[d],f(m,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,d)&&(v[d]||(v[d]=[]),f(v[d],E.outdatedDependencies[d]));A&&(f(m,[E.moduleId]),b[d]=g)}var q,k=[];for(n=0;n<m.length;n++)d=m[n],_[d]&&_[d].hot._selfAccepted&&k.push({module:d,errorHandler:_[d].hot._selfAccepted});p("dispose"),Object.keys(w).forEach(function(e){!1===w[e]&&function(e){delete installedChunks[e]}(e)});for(var H,I,M=m.slice();M.length>0;)if(d=M.pop(),a=_[d]){var C={},T=a.hot._disposeHandlers;for(c=0;c<T.length;c++)(t=T[c])(C);for(s[d]=C,a.hot.active=!1,delete _[d],delete v[d],c=0;c<a.children.length;c++){var U=_[a.children[c]];U&&((q=U.parents.indexOf(d))>=0&&U.parents.splice(q,1))}}for(d in v)if(Object.prototype.hasOwnProperty.call(v,d)&&(a=_[d]))for(I=v[d],c=0;c<I.length;c++)H=I[c],(q=a.children.indexOf(H))>=0&&a.children.splice(q,1);for(d in p("apply"),o=y,b)Object.prototype.hasOwnProperty.call(b,d)&&(e[d]=b[d]);var R=null;for(d in v)if(Object.prototype.hasOwnProperty.call(v,d)&&(a=_[d])){I=v[d];var L=[];for(n=0;n<I.length;n++)if(H=I[n],t=a.hot._acceptedDependencies[H]){if(-1!==L.indexOf(t))continue;L.push(t)}for(n=0;n<L.length;n++){t=L[n];try{t(I)}catch(e){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:d,dependencyId:I[n],error:e}),r.ignoreErrored||R||(R=e)}}}for(n=0;n<k.length;n++){var N=k[n];d=N.module,i=[d];try{D(d)}catch(e){if("function"==typeof N.errorHandler)try{N.errorHandler(e)}catch(t){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:d,error:t,originalError:e}),r.ignoreErrored||R||(R=t),R||(R=e)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:d,error:e}),r.ignoreErrored||R||(R=e)}}return R?(p("fail"),Promise.reject(R)):(p("idle"),new Promise(function(e){e(m)}))}var _={};function D(r){if(_[r])return _[r].exports;var t=_[r]={i:r,l:!1,exports:{},hot:d(r),parents:(c=i,i=[],c),children:[]};return e[r].call(t.exports,t,t.exports,a(r)),t.l=!0,t.exports}D.m=e,D.c=_,D.d=function(e,r,t){D.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},D.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},D.t=function(e,r){if(1&r&&(e=D(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(D.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)D.d(t,n,function(r){return e[r]}.bind(null,n));return t},D.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return D.d(r,"a",r),r},D.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},D.p="/Users/saifurrehman/Desktop/POCs/cumulus-bank/authmicroservice-mariadb/dist",D.h=function(){return o},a(0)(D.s=0)}([function(e,r,t){t(1),e.exports=t(2)},function(e,r){e.exports=require("@babel/polyfill")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t(3),o=t(4),s=t(5);o("ts-express:server");const i=function(e){let r="string"==typeof e?parseInt(e,10):e;return isNaN(r)?e:r>=0&&r}(3004);s.default.set("port",i);const c=n.createServer(s.default);c.listen(i),c.on("error",function(e){if("listen"!==e.syscall)throw e;let r="string"==typeof i?"Pipe "+i:"Port "+i;switch(e.code){case"EACCES":console.error(`${r} requires elevated privileges`),process.exit(1);break;case"EADDRINUSE":console.error(`${r} is already in use`),process.exit(1);break;default:throw e}}),c.on("listening",function(){let e=c.address(),r="string"==typeof e?`pipe ${e}`:`port ${e.port}`;o(`Listening on ${r}`)})},function(e,r){e.exports=require("http")},function(e,r){e.exports=require("debug")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t(6),o=t(7),s=t(8),i=t(9),c=t(10),a=t(11),d=t(12),l=t(13);let u=t(14);r.default=(new class{constructor(){this.jwtOptions={},this.ExtractJwt=c.ExtractJwt,this.JwtStrategy=c.ExtractJwt,this.newdata=[],this.jwtOptions.jwtFromRequest=this.ExtractJwt.fromAuthHeaderAsBearerToken(),this.jwtOptions.secretOrKey="process.env.SECRET",this.connectionString={host:"localhost",user:"admin",password:"admin",database:"SAMPLE",connectionLimit:5,port:"3306"},this.pool=u.createPool(this.connectionString),console.log(this.connectionString),this.express=n(),a.instrument(this.express),this.middleware(),this.routes()}ensureToken(e,r,t){const n=e.headers.authorization;if(void 0!==n){const r=n.split(" ")[1];e.token=r,t()}else r.sendStatus(403)}middleware(){this.express.use(function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","X-Requested-With,content-type"),r.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),t()}),this.express.use(o("dev")),this.express.use(s.json()),this.express.use(i.initialize()),this.express.use(s.urlencoded({extended:!1}))}routes(){let e=n.Router();e.post("/login",(e,r,t)=>{this.pool.getConnection().then(t=>{t.query("SELECT * FROM SAMPLE.UserData WHERE Email=?",[e.body.email]).then(n=>{n?l.verify(e.body.password,n[0].Password)?(t.end(),n={data:n},r.json({sucessful:!0,token:d.sign(n,"process.env.SECRET")})):(t.end(),r.status(401).json({message:"Password/Email did not match"})):(t.end(),r.status(401).json({message:"Please signup, no email exists"}))}).catch(e=>{t.end(),e&&(r.status(404).json({err:e}),console.log(e))})}).catch(e=>{e&&(r.status(404).json({err:e}),console.log(e))})}),e.post("/createUser",(e,r,t)=>{this.newdata=[],this.pool.getConnection().then(t=>{t.query("insert into SAMPLE.UserData (LastName, FirstName, Email, Password, Age, Mobile) VALUES (?, ?, ?, ?, ?, ?)",[e.body.lastName,e.body.firstName,e.body.email,l.generate(e.body.password),e.body.age,e.body.mobile]).then(e=>{t.end(),r.json({message:"sucessful"})}).catch(e=>{t.end(),e&&r.status(404).json({err:e})})}).catch(e=>{e&&r.status(404).json({err:e})})}),e.get("/healthz",(e,r,t)=>{r.send("success")}),this.express.use("/",e)}}).express},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("morgan")},function(e,r){e.exports=require("body-parser")},function(e,r){e.exports=require("passport")},function(e,r){e.exports=require("passport-jwt")},function(e,r){e.exports=require("epimetheus")},function(e,r){e.exports=require("jsonwebtoken")},function(e,r){e.exports=require("password-hash")},function(e,r){e.exports=require("mariadb")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGJhYmVsL3BvbHlmaWxsXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiaHR0cFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImRlYnVnXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJleHByZXNzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9yZ2FuXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYm9keS1wYXJzZXJcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzcG9ydFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcInBhc3Nwb3J0LWp3dFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImVwaW1ldGhldXNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqc29ud2VidG9rZW5cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzd29yZC1oYXNoXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibWFyaWFkYlwiIl0sIm5hbWVzIjpbImhvdERvd25sb2FkVXBkYXRlQ2h1bmsiLCJjaHVua0lkIiwiY2h1bmsiLCJyZXF1aXJlIiwiaG90Q3VycmVudEhhc2giLCJtb3JlTW9kdWxlcyIsImhvdEF2YWlsYWJsZUZpbGVzTWFwIiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJtb2R1bGVJZCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImhvdFVwZGF0ZSIsImhvdFdhaXRpbmdGaWxlcyIsImhvdENodW5rc0xvYWRpbmciLCJob3RVcGRhdGVEb3dubG9hZGVkIiwiaG90QWRkVXBkYXRlQ2h1bmsiLCJpZCIsIm1vZHVsZXMiLCJob3RDdXJyZW50Q2hpbGRNb2R1bGUiLCJob3RBcHBseU9uVXBkYXRlIiwiaG90Q3VycmVudE1vZHVsZURhdGEiLCJob3RDdXJyZW50UGFyZW50cyIsImhvdEN1cnJlbnRQYXJlbnRzVGVtcCIsImhvdENyZWF0ZVJlcXVpcmUiLCJtZSIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZm4iLCJyZXF1ZXN0IiwiaG90IiwiYWN0aXZlIiwicGFyZW50cyIsImluZGV4T2YiLCJwdXNoIiwiY2hpbGRyZW4iLCJjb25zb2xlIiwid2FybiIsIk9iamVjdEZhY3RvcnkiLCJuYW1lIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInNldCIsInZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlIiwiaG90U3RhdHVzIiwiaG90U2V0U3RhdHVzIiwidGhlbiIsImZpbmlzaENodW5rTG9hZGluZyIsImVyciIsImhvdFdhaXRpbmdGaWxlc01hcCIsImhvdEVuc3VyZVVwZGF0ZUNodW5rIiwidCIsIm1vZGUiLCJob3RDcmVhdGVNb2R1bGUiLCJfYWNjZXB0ZWREZXBlbmRlbmNpZXMiLCJfZGVjbGluZWREZXBlbmRlbmNpZXMiLCJfc2VsZkFjY2VwdGVkIiwiX3NlbGZEZWNsaW5lZCIsIl9kaXNwb3NlSGFuZGxlcnMiLCJfbWFpbiIsImFjY2VwdCIsImRlcCIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiaSIsImxlbmd0aCIsImRlY2xpbmUiLCJkaXNwb3NlIiwiYWRkRGlzcG9zZUhhbmRsZXIiLCJyZW1vdmVEaXNwb3NlSGFuZGxlciIsImlkeCIsInNwbGljZSIsImNoZWNrIiwiaG90Q2hlY2siLCJhcHBseSIsImhvdEFwcGx5Iiwic3RhdHVzIiwibCIsImhvdFN0YXR1c0hhbmRsZXJzIiwiYWRkU3RhdHVzSGFuZGxlciIsInJlbW92ZVN0YXR1c0hhbmRsZXIiLCJkYXRhIiwibmV3U3RhdHVzIiwiaG90RGVmZXJyZWQiLCJob3RVcGRhdGVOZXdIYXNoIiwidG9Nb2R1bGVJZCIsIkVycm9yIiwidXBkYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJob3REb3dubG9hZE1hbmlmZXN0IiwiYyIsImgiLCJwcm9taXNlIiwicmVqZWN0IiwiZGVmZXJyZWQiLCJyZXN1bHQiLCJvdXRkYXRlZE1vZHVsZXMiLCJvcHRpb25zIiwiY2IiLCJqIiwibW9kdWxlIiwiZ2V0QWZmZWN0ZWRTdHVmZiIsInVwZGF0ZU1vZHVsZUlkIiwib3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJxdWV1ZSIsInNsaWNlIiwibWFwIiwiY2hhaW4iLCJxdWV1ZUl0ZW0iLCJwb3AiLCJ0eXBlIiwicGFyZW50SWQiLCJwYXJlbnQiLCJjb25jYXQiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImFwcGxpZWRVcGRhdGUiLCJ3YXJuVW5leHBlY3RlZFJlcXVpcmUiLCJhYm9ydEVycm9yIiwiZG9BcHBseSIsImRvRGlzcG9zZSIsImNoYWluSW5mbyIsImpvaW4iLCJvbkRlY2xpbmVkIiwiaWdub3JlRGVjbGluZWQiLCJvblVuYWNjZXB0ZWQiLCJpZ25vcmVVbmFjY2VwdGVkIiwib25BY2NlcHRlZCIsIm9uRGlzcG9zZWQiLCJvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMiLCJlcnJvckhhbmRsZXIiLCJrZXlzIiwiZm9yRWFjaCIsImluc3RhbGxlZENodW5rcyIsImhvdERpc3Bvc2VDaHVuayIsImRlcGVuZGVuY3kiLCJtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyIsImRpc3Bvc2VIYW5kbGVycyIsImNoaWxkIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJvbkVycm9yZWQiLCJkZXBlbmRlbmN5SWQiLCJpZ25vcmVFcnJvcmVkIiwiZXJyMiIsIm9yaWdpbmFsRXJyb3IiLCJleHBvcnRzIiwibSIsImQiLCJnZXR0ZXIiLCJvIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJzIiwiaHR0cCIsImRlYnVnIiwiQXBwXzEiLCJwb3J0IiwidmFsIiwicGFyc2VJbnQiLCJpc05hTiIsIm5vcm1hbGl6ZVBvcnQiLCJkZWZhdWx0Iiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwibGlzdGVuIiwib24iLCJzeXNjYWxsIiwiY29kZSIsInByb2Nlc3MiLCJleGl0IiwiYWRkciIsImFkZHJlc3MiLCJleHByZXNzIiwibG9nZ2VyIiwiYm9keVBhcnNlciIsInBhc3Nwb3J0IiwicGFzc3BvcnRKV1QiLCJlcGltZXRoZXVzIiwiand0IiwicGFzc3dvcmRoYXNoIiwibWFyaWFkYiIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJqd3RPcHRpb25zIiwiRXh0cmFjdEp3dCIsIkp3dFN0cmF0ZWd5IiwibmV3ZGF0YSIsImp3dEZyb21SZXF1ZXN0IiwiZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuIiwic2VjcmV0T3JLZXkiLCJjb25uZWN0aW9uU3RyaW5nIiwiaG9zdCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIiwiY29ubmVjdGlvbkxpbWl0IiwicG9vbCIsImNyZWF0ZVBvb2wiLCJsb2ciLCJpbnN0cnVtZW50IiwibWlkZGxld2FyZSIsInJvdXRlcyIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJIZWFkZXIiLCJoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJzcGxpdCIsInRva2VuIiwic2VuZFN0YXR1cyIsInVzZSIsImhlYWRlciIsImpzb24iLCJpbml0aWFsaXplIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicXVlcnkiLCJib2R5IiwiZW1haWwiLCJ2ZXJpZnkiLCJlbmQiLCJzdWNlc3NmdWwiLCJzaWduIiwibWVzc2FnZSIsImNhdGNoIiwibGFzdE5hbWUiLCJmaXJzdE5hbWUiLCJnZW5lcmF0ZSIsImFnZSIsIm1vYmlsZSIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUNBLFNBQUFBLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsUUFBQSxLQUFBRixFQUFBLElBQUFHLEVBQUEsbUJBME9BLFNBQUFILEVBQUFJLEdBQ0EsSUFB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LElBQUEsWUFBQWlMLEVBQUFDLEVBQUFDLEtBQ0FELEVBQUFpQyxLQUFBLGFBRUF0RCxLQUFBVixRQUFBdUMsSUFBQSxJQUFBTSxNQUdBN0MsdUJDeEpBckYsRUFBQWdELFFBQUF0SixRQUFBLDBCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLHlCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLDhCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLDJCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLCtCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLDZCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLCtCQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBLGdDQ0FBc0csRUFBQWdELFFBQUF0SixRQUFBIiwiZmlsZSI6ImJ1bmRsZS1iZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKSB7XG4gXHRcdHZhciBjaHVuayA9IHJlcXVpcmUoXCIuL1wiICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiKTtcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmsuaWQsIGNodW5rLm1vZHVsZXMpO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkTWFuaWZlc3QoKSB7XG4gXHRcdHRyeSB7XG4gXHRcdFx0dmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIuL1wiICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCIpO1xuIFx0XHR9IGNhdGNoIChlKSB7XG4gXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuIFx0XHR9XG4gXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodXBkYXRlKTtcbiBcdH1cblxuIFx0Ly9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERpc3Bvc2VDaHVuayhjaHVua0lkKSB7XG4gXHRcdGRlbGV0ZSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHR9XG5cbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCI5NWM2ODE2NjAzZjBhY2I2YWY3MVwiO1xuIFx0dmFyIGhvdFJlcXVlc3RUaW1lb3V0ID0gMTAwMDA7XG4gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcbiBcdHZhciBob3RDdXJyZW50Q2hpbGRNb2R1bGU7XG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdO1xuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHNUZW1wID0gW107XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkge1xuIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0aWYgKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XG4gXHRcdHZhciBmbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiBcdFx0XHRpZiAobWUuaG90LmFjdGl2ZSkge1xuIFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0pIHtcbiBcdFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA9PT0gLTEpIHtcbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0aG90Q3VycmVudENoaWxkTW9kdWxlID0gcmVxdWVzdDtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpID09PSAtMSkge1xuIFx0XHRcdFx0XHRtZS5jaGlsZHJlbi5wdXNoKHJlcXVlc3QpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRjb25zb2xlLndhcm4oXG4gXHRcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICtcbiBcdFx0XHRcdFx0XHRyZXF1ZXN0ICtcbiBcdFx0XHRcdFx0XHRcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgK1xuIFx0XHRcdFx0XHRcdG1vZHVsZUlkXG4gXHRcdFx0XHQpO1xuIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XG4gXHRcdH07XG4gXHRcdHZhciBPYmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gT2JqZWN0RmFjdG9yeShuYW1lKSB7XG4gXHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcbiBcdFx0XHRcdH0sXG4gXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9O1xuIFx0XHR9O1xuIFx0XHRmb3IgKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkgJiZcbiBcdFx0XHRcdG5hbWUgIT09IFwiZVwiICYmXG4gXHRcdFx0XHRuYW1lICE9PSBcInRcIlxuIFx0XHRcdCkge1xuIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBPYmplY3RGYWN0b3J5KG5hbWUpKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0Zm4uZSA9IGZ1bmN0aW9uKGNodW5rSWQpIHtcbiBcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInJlYWR5XCIpIGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCkudGhlbihmaW5pc2hDaHVua0xvYWRpbmcsIGZ1bmN0aW9uKGVycikge1xuIFx0XHRcdFx0ZmluaXNoQ2h1bmtMb2FkaW5nKCk7XG4gXHRcdFx0XHR0aHJvdyBlcnI7XG4gXHRcdFx0fSk7XG5cbiBcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XG4gXHRcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xuIFx0XHRcdFx0XHRpZiAoIWhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xuIFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fTtcbiBcdFx0Zm4udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdFx0aWYgKG1vZGUgJiAxKSB2YWx1ZSA9IGZuKHZhbHVlKTtcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy50KHZhbHVlLCBtb2RlICYgfjEpO1xuIFx0XHR9O1xuIFx0XHRyZXR1cm4gZm47XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7XG4gXHRcdHZhciBob3QgPSB7XG4gXHRcdFx0Ly8gcHJpdmF0ZSBzdHVmZlxuIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXG4gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcbiBcdFx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcbiBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcbiBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcbiBcdFx0XHRfbWFpbjogaG90Q3VycmVudENoaWxkTW9kdWxlICE9PSBtb2R1bGVJZCxcblxuIFx0XHRcdC8vIE1vZHVsZSBBUElcbiBcdFx0XHRhY3RpdmU6IHRydWUsXG4gXHRcdFx0YWNjZXB0OiBmdW5jdGlvbihkZXAsIGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwiZnVuY3Rpb25cIikgaG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuIFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcbiBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuIFx0XHRcdFx0ZWxzZSBob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuIFx0XHRcdH0sXG4gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XG4gXHRcdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXG4gXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwXSA9IHRydWU7XG4gXHRcdFx0fSxcbiBcdFx0XHRkaXNwb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xuIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XG4gXHRcdFx0fSxcbiBcdFx0XHRhZGREaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuIFx0XHRcdH0sXG4gXHRcdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gXHRcdFx0XHRpZiAoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdH0sXG5cbiBcdFx0XHQvLyBNYW5hZ2VtZW50IEFQSVxuIFx0XHRcdGNoZWNrOiBob3RDaGVjayxcbiBcdFx0XHRhcHBseTogaG90QXBwbHksXG4gXHRcdFx0c3RhdHVzOiBmdW5jdGlvbihsKSB7XG4gXHRcdFx0XHRpZiAoIWwpIHJldHVybiBob3RTdGF0dXM7XG4gXHRcdFx0XHRob3RTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xuIFx0XHRcdH0sXG4gXHRcdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbiBcdFx0XHR9LFxuIFx0XHRcdHJlbW92ZVN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcbiBcdFx0XHRcdHZhciBpZHggPSBob3RTdGF0dXNIYW5kbGVycy5pbmRleE9mKGwpO1xuIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBob3RTdGF0dXNIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHR9LFxuXG4gXHRcdFx0Ly9pbmhlcml0IGZyb20gcHJldmlvdXMgZGlzcG9zZSBjYWxsXG4gXHRcdFx0ZGF0YTogaG90Q3VycmVudE1vZHVsZURhdGFbbW9kdWxlSWRdXG4gXHRcdH07XG4gXHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IHVuZGVmaW5lZDtcbiBcdFx0cmV0dXJuIGhvdDtcbiBcdH1cblxuIFx0dmFyIGhvdFN0YXR1c0hhbmRsZXJzID0gW107XG4gXHR2YXIgaG90U3RhdHVzID0gXCJpZGxlXCI7XG5cbiBcdGZ1bmN0aW9uIGhvdFNldFN0YXR1cyhuZXdTdGF0dXMpIHtcbiBcdFx0aG90U3RhdHVzID0gbmV3U3RhdHVzO1xuIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxuIFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzW2ldLmNhbGwobnVsbCwgbmV3U3RhdHVzKTtcbiBcdH1cblxuIFx0Ly8gd2hpbGUgZG93bmxvYWRpbmdcbiBcdHZhciBob3RXYWl0aW5nRmlsZXMgPSAwO1xuIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xuIFx0dmFyIGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xuIFx0dmFyIGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XG4gXHR2YXIgaG90QXZhaWxhYmxlRmlsZXNNYXAgPSB7fTtcbiBcdHZhciBob3REZWZlcnJlZDtcblxuIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXG4gXHR2YXIgaG90VXBkYXRlLCBob3RVcGRhdGVOZXdIYXNoO1xuXG4gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XG4gXHRcdHZhciBpc051bWJlciA9ICtpZCArIFwiXCIgPT09IGlkO1xuIFx0XHRyZXR1cm4gaXNOdW1iZXIgPyAraWQgOiBpZDtcbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90Q2hlY2soYXBwbHkpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHtcbiBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJjaGVjaygpIGlzIG9ubHkgYWxsb3dlZCBpbiBpZGxlIHN0YXR1c1wiKTtcbiBcdFx0fVxuIFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XG4gXHRcdGhvdFNldFN0YXR1cyhcImNoZWNrXCIpO1xuIFx0XHRyZXR1cm4gaG90RG93bmxvYWRNYW5pZmVzdChob3RSZXF1ZXN0VGltZW91dCkudGhlbihmdW5jdGlvbih1cGRhdGUpIHtcbiBcdFx0XHRpZiAoIXVwZGF0ZSkge1xuIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcbiBcdFx0XHRcdHJldHVybiBudWxsO1xuIFx0XHRcdH1cbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xuIFx0XHRcdGhvdEF2YWlsYWJsZUZpbGVzTWFwID0gdXBkYXRlLmM7XG4gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVwZGF0ZS5oO1xuXG4gXHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcbiBcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuIFx0XHRcdFx0aG90RGVmZXJyZWQgPSB7XG4gXHRcdFx0XHRcdHJlc29sdmU6IHJlc29sdmUsXG4gXHRcdFx0XHRcdHJlamVjdDogcmVqZWN0XG4gXHRcdFx0XHR9O1xuIFx0XHRcdH0pO1xuIFx0XHRcdGhvdFVwZGF0ZSA9IHt9O1xuIFx0XHRcdHZhciBjaHVua0lkID0gMDtcbiBcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9uZS1ibG9ja3NcbiBcdFx0XHR7XG4gXHRcdFx0XHQvKmdsb2JhbHMgY2h1bmtJZCAqL1xuIFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdFx0fVxuIFx0XHRcdGlmIChcbiBcdFx0XHRcdGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIgJiZcbiBcdFx0XHRcdGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiZcbiBcdFx0XHRcdGhvdFdhaXRpbmdGaWxlcyA9PT0gMFxuIFx0XHRcdCkge1xuIFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xuIFx0XHRcdH1cbiBcdFx0XHRyZXR1cm4gcHJvbWlzZTtcbiBcdFx0fSk7XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHtcbiBcdFx0aWYgKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSB8fCAhaG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0pXG4gXHRcdFx0cmV0dXJuO1xuIFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IGZhbHNlO1xuIFx0XHRmb3IgKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0aG90VXBkYXRlW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYgKC0taG90V2FpdGluZ0ZpbGVzID09PSAwICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDApIHtcbiBcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHRpZiAoIWhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzKys7XG4gXHRcdFx0aG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKTtcbiBcdFx0fVxuIFx0fVxuXG4gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xuIFx0XHRob3RTZXRTdGF0dXMoXCJyZWFkeVwiKTtcbiBcdFx0dmFyIGRlZmVycmVkID0gaG90RGVmZXJyZWQ7XG4gXHRcdGhvdERlZmVycmVkID0gbnVsbDtcbiBcdFx0aWYgKCFkZWZlcnJlZCkgcmV0dXJuO1xuIFx0XHRpZiAoaG90QXBwbHlPblVwZGF0ZSkge1xuIFx0XHRcdC8vIFdyYXAgZGVmZXJyZWQgb2JqZWN0IGluIFByb21pc2UgdG8gbWFyayBpdCBhcyBhIHdlbGwtaGFuZGxlZCBQcm9taXNlIHRvXG4gXHRcdFx0Ly8gYXZvaWQgdHJpZ2dlcmluZyB1bmNhdWdodCBleGNlcHRpb24gd2FybmluZyBpbiBDaHJvbWUuXG4gXHRcdFx0Ly8gU2VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ2NTY2NlxuIFx0XHRcdFByb21pc2UucmVzb2x2ZSgpXG4gXHRcdFx0XHQudGhlbihmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIGhvdEFwcGx5KGhvdEFwcGx5T25VcGRhdGUpO1xuIFx0XHRcdFx0fSlcbiBcdFx0XHRcdC50aGVuKFxuIFx0XHRcdFx0XHRmdW5jdGlvbihyZXN1bHQpIHtcbiBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdGZ1bmN0aW9uKGVycikge1xuIFx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHQpO1xuIFx0XHR9IGVsc2Uge1xuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0XHRmb3IgKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcbiBcdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcbiBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2godG9Nb2R1bGVJZChpZCkpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKG91dGRhdGVkTW9kdWxlcyk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90QXBwbHkob3B0aW9ucykge1xuIFx0XHRpZiAoaG90U3RhdHVzICE9PSBcInJlYWR5XCIpXG4gXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xuIFx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuIFx0XHR2YXIgY2I7XG4gXHRcdHZhciBpO1xuIFx0XHR2YXIgajtcbiBcdFx0dmFyIG1vZHVsZTtcbiBcdFx0dmFyIG1vZHVsZUlkO1xuXG4gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYodXBkYXRlTW9kdWxlSWQpIHtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW3VwZGF0ZU1vZHVsZUlkXTtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcblxuIFx0XHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpLm1hcChmdW5jdGlvbihpZCkge1xuIFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0Y2hhaW46IFtpZF0sXG4gXHRcdFx0XHRcdGlkOiBpZFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuIFx0XHRcdFx0dmFyIHF1ZXVlSXRlbSA9IHF1ZXVlLnBvcCgpO1xuIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWVJdGVtLmlkO1xuIFx0XHRcdFx0dmFyIGNoYWluID0gcXVldWVJdGVtLmNoYWluO1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAoIW1vZHVsZSB8fCBtb2R1bGUuaG90Ll9zZWxmQWNjZXB0ZWQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0aWYgKG1vZHVsZS5ob3QuX3NlbGZEZWNsaW5lZCkge1xuIFx0XHRcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1kZWNsaW5lZFwiLFxuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChtb2R1bGUuaG90Ll9tYWluKSB7XG4gXHRcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdFx0dHlwZTogXCJ1bmFjY2VwdGVkXCIsXG4gXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLFxuIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZFxuIFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdFx0XHR2YXIgcGFyZW50SWQgPSBtb2R1bGUucGFyZW50c1tpXTtcbiBcdFx0XHRcdFx0dmFyIHBhcmVudCA9IGluc3RhbGxlZE1vZHVsZXNbcGFyZW50SWRdO1xuIFx0XHRcdFx0XHRpZiAoIXBhcmVudCkgY29udGludWU7XG4gXHRcdFx0XHRcdGlmIChwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XHRcdFx0dHlwZTogXCJkZWNsaW5lZFwiLFxuIFx0XHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLmNvbmNhdChbcGFyZW50SWRdKSxcbiBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdHBhcmVudElkOiBwYXJlbnRJZFxuIFx0XHRcdFx0XHRcdH07XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0aWYgKG91dGRhdGVkTW9kdWxlcy5pbmRleE9mKHBhcmVudElkKSAhPT0gLTEpIGNvbnRpbnVlO1xuIFx0XHRcdFx0XHRpZiAocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXG4gXHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0gPSBbXTtcbiBcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0sIFttb2R1bGVJZF0pO1xuIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF07XG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcbiBcdFx0XHRcdFx0cXVldWUucHVzaCh7XG4gXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLmNvbmNhdChbcGFyZW50SWRdKSxcbiBcdFx0XHRcdFx0XHRpZDogcGFyZW50SWRcbiBcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuXG4gXHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdHR5cGU6IFwiYWNjZXB0ZWRcIixcbiBcdFx0XHRcdG1vZHVsZUlkOiB1cGRhdGVNb2R1bGVJZCxcbiBcdFx0XHRcdG91dGRhdGVkTW9kdWxlczogb3V0ZGF0ZWRNb2R1bGVzLFxuIFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXM6IG91dGRhdGVkRGVwZW5kZW5jaWVzXG4gXHRcdFx0fTtcbiBcdFx0fVxuXG4gXHRcdGZ1bmN0aW9uIGFkZEFsbFRvU2V0KGEsIGIpIHtcbiBcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdHZhciBpdGVtID0gYltpXTtcbiBcdFx0XHRcdGlmIChhLmluZGV4T2YoaXRlbSkgPT09IC0xKSBhLnB1c2goaXRlbSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gYXQgYmVnaW4gYWxsIHVwZGF0ZXMgbW9kdWxlcyBhcmUgb3V0ZGF0ZWRcbiBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxuIFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcbiBcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xuIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xuXG4gXHRcdHZhciB3YXJuVW5leHBlY3RlZFJlcXVpcmUgPSBmdW5jdGlvbiB3YXJuVW5leHBlY3RlZFJlcXVpcmUoKSB7XG4gXHRcdFx0Y29uc29sZS53YXJuKFxuIFx0XHRcdFx0XCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgKyByZXN1bHQubW9kdWxlSWQgKyBcIikgdG8gZGlzcG9zZWQgbW9kdWxlXCJcbiBcdFx0XHQpO1xuIFx0XHR9O1xuXG4gXHRcdGZvciAodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xuIFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcbiBcdFx0XHRcdG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XG4gXHRcdFx0XHQvKiogQHR5cGUge1RPRE99ICovXG4gXHRcdFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRcdFx0aWYgKGhvdFVwZGF0ZVtpZF0pIHtcbiBcdFx0XHRcdFx0cmVzdWx0ID0gZ2V0QWZmZWN0ZWRTdHVmZihtb2R1bGVJZCk7XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHRyZXN1bHQgPSB7XG4gXHRcdFx0XHRcdFx0dHlwZTogXCJkaXNwb3NlZFwiLFxuIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBpZFxuIFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0LyoqIEB0eXBlIHtFcnJvcnxmYWxzZX0gKi9cbiBcdFx0XHRcdHZhciBhYm9ydEVycm9yID0gZmFsc2U7XG4gXHRcdFx0XHR2YXIgZG9BcHBseSA9IGZhbHNlO1xuIFx0XHRcdFx0dmFyIGRvRGlzcG9zZSA9IGZhbHNlO1xuIFx0XHRcdFx0dmFyIGNoYWluSW5mbyA9IFwiXCI7XG4gXHRcdFx0XHRpZiAocmVzdWx0LmNoYWluKSB7XG4gXHRcdFx0XHRcdGNoYWluSW5mbyA9IFwiXFxuVXBkYXRlIHByb3BhZ2F0aW9uOiBcIiArIHJlc3VsdC5jaGFpbi5qb2luKFwiIC0+IFwiKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdHN3aXRjaCAocmVzdWx0LnR5cGUpIHtcbiBcdFx0XHRcdFx0Y2FzZSBcInNlbGYtZGVjbGluZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRlY2xpbmVkKSBvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRGVjbGluZWQpXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBvZiBzZWxmIGRlY2xpbmU6IFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcImRlY2xpbmVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EZWNsaW5lZCkgb3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbiBcdFx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5tb2R1bGVJZCArXG4gXHRcdFx0XHRcdFx0XHRcdFx0XCIgaW4gXCIgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5wYXJlbnRJZCArXG4gXHRcdFx0XHRcdFx0XHRcdFx0Y2hhaW5JbmZvXG4gXHRcdFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwidW5hY2NlcHRlZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uVW5hY2NlcHRlZCkgb3B0aW9ucy5vblVuYWNjZXB0ZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlVW5hY2NlcHRlZClcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG4gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIFwiICsgbW9kdWxlSWQgKyBcIiBpcyBub3QgYWNjZXB0ZWRcIiArIGNoYWluSW5mb1xuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcImFjY2VwdGVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25BY2NlcHRlZCkgb3B0aW9ucy5vbkFjY2VwdGVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0ZG9BcHBseSA9IHRydWU7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJkaXNwb3NlZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGlzcG9zZWQpIG9wdGlvbnMub25EaXNwb3NlZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGRvRGlzcG9zZSA9IHRydWU7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGRlZmF1bHQ6XG4gXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leGNlcHRpb24gdHlwZSBcIiArIHJlc3VsdC50eXBlKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChhYm9ydEVycm9yKSB7XG4gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xuIFx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoYWJvcnRFcnJvcik7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAoZG9BcHBseSkge1xuIFx0XHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XG4gXHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgcmVzdWx0Lm91dGRhdGVkTW9kdWxlcyk7XG4gXHRcdFx0XHRcdGZvciAobW9kdWxlSWQgaW4gcmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG4gXHRcdFx0XHRcdFx0aWYgKFxuIFx0XHRcdFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuIFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXMsXG4gXHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkXG4gXHRcdFx0XHRcdFx0XHQpXG4gXHRcdFx0XHRcdFx0KSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoIW91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSlcbiBcdFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdID0gW107XG4gXHRcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChcbiBcdFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLFxuIFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdXG4gXHRcdFx0XHRcdFx0XHQpO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKGRvRGlzcG9zZSkge1xuIFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIFtyZXN1bHQubW9kdWxlSWRdKTtcbiBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSB3YXJuVW5leHBlY3RlZFJlcXVpcmU7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gU3RvcmUgc2VsZiBhY2NlcHRlZCBvdXRkYXRlZCBtb2R1bGVzIHRvIHJlcXVpcmUgdGhlbSBsYXRlciBieSB0aGUgbW9kdWxlIHN5c3RlbVxuIFx0XHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XG4gXHRcdGZvciAoaSA9IDA7IGkgPCBvdXRkYXRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRtb2R1bGVJZCA9IG91dGRhdGVkTW9kdWxlc1tpXTtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSAmJlxuIFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWRcbiBcdFx0XHQpXG4gXHRcdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XG4gXHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdGVycm9ySGFuZGxlcjogaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWRcbiBcdFx0XHRcdH0pO1xuIFx0XHR9XG5cbiBcdFx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXG4gXHRcdGhvdFNldFN0YXR1cyhcImRpc3Bvc2VcIik7XG4gXHRcdE9iamVjdC5rZXlzKGhvdEF2YWlsYWJsZUZpbGVzTWFwKS5mb3JFYWNoKGZ1bmN0aW9uKGNodW5rSWQpIHtcbiBcdFx0XHRpZiAoaG90QXZhaWxhYmxlRmlsZXNNYXBbY2h1bmtJZF0gPT09IGZhbHNlKSB7XG4gXHRcdFx0XHRob3REaXNwb3NlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdFx0fVxuIFx0XHR9KTtcblxuIFx0XHR2YXIgaWR4O1xuIFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcbiBcdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiBcdFx0XHRtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xuIFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdGlmICghbW9kdWxlKSBjb250aW51ZTtcblxuIFx0XHRcdHZhciBkYXRhID0ge307XG5cbiBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcbiBcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xuIFx0XHRcdGZvciAoaiA9IDA7IGogPCBkaXNwb3NlSGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xuIFx0XHRcdFx0Y2IoZGF0YSk7XG4gXHRcdFx0fVxuIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XG5cbiBcdFx0XHQvLyBkaXNhYmxlIG1vZHVsZSAodGhpcyBkaXNhYmxlcyByZXF1aXJlcyBmcm9tIHRoaXMgbW9kdWxlKVxuIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XG5cbiBcdFx0XHQvLyByZW1vdmUgbW9kdWxlIGZyb20gY2FjaGVcbiBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG5cbiBcdFx0XHQvLyB3aGVuIGRpc3Bvc2luZyB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgZGlzcG9zZSBoYW5kbGVyXG4gXHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcblxuIFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXG4gXHRcdFx0Zm9yIChqID0gMDsgaiA8IG1vZHVsZS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGNoaWxkID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGUuY2hpbGRyZW5bal1dO1xuIFx0XHRcdFx0aWYgKCFjaGlsZCkgY29udGludWU7XG4gXHRcdFx0XHRpZHggPSBjaGlsZC5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpO1xuIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSB7XG4gXHRcdFx0XHRcdGNoaWxkLnBhcmVudHMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gcmVtb3ZlIG91dGRhdGVkIGRlcGVuZGVuY3kgZnJvbSBtb2R1bGUgY2hpbGRyZW5cbiBcdFx0dmFyIGRlcGVuZGVuY3k7XG4gXHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcztcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpXG4gXHRcdFx0KSB7XG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdGlmIChtb2R1bGUpIHtcbiBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdGZvciAoaiA9IDA7IGogPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcbiBcdFx0XHRcdFx0XHRpZHggPSBtb2R1bGUuY2hpbGRyZW4uaW5kZXhPZihkZXBlbmRlbmN5KTtcbiBcdFx0XHRcdFx0XHRpZiAoaWR4ID49IDApIG1vZHVsZS5jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIE5vdCBpbiBcImFwcGx5XCIgcGhhc2VcbiBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XG5cbiBcdFx0aG90Q3VycmVudEhhc2ggPSBob3RVcGRhdGVOZXdIYXNoO1xuXG4gXHRcdC8vIGluc2VydCBuZXcgY29kZVxuIFx0XHRmb3IgKG1vZHVsZUlkIGluIGFwcGxpZWRVcGRhdGUpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwcGxpZWRVcGRhdGUsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBhcHBsaWVkVXBkYXRlW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBjYWxsIGFjY2VwdCBoYW5kbGVyc1xuIFx0XHR2YXIgZXJyb3IgPSBudWxsO1xuIFx0XHRmb3IgKG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZClcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0aWYgKG1vZHVsZSkge1xuIFx0XHRcdFx0XHRtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IFtdO1xuIFx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV07XG4gXHRcdFx0XHRcdFx0Y2IgPSBtb2R1bGUuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBlbmRlbmN5XTtcbiBcdFx0XHRcdFx0XHRpZiAoY2IpIHtcbiBcdFx0XHRcdFx0XHRcdGlmIChjYWxsYmFja3MuaW5kZXhPZihjYikgIT09IC0xKSBjb250aW51ZTtcbiBcdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5wdXNoKGNiKTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdFx0XHRcdGNiID0gY2FsbGJhY2tzW2ldO1xuIFx0XHRcdFx0XHRcdHRyeSB7XG4gXHRcdFx0XHRcdFx0XHRjYihtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyk7XG4gXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuIFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYWNjZXB0LWVycm9yZWRcIixcbiBcdFx0XHRcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdFx0XHRcdFx0ZGVwZW5kZW5jeUlkOiBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXSxcbiBcdFx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXG4gXHRcdFx0XHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRcdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gXHRcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gTG9hZCBzZWxmIGFjY2VwdGVkIG1vZHVsZXNcbiBcdFx0Zm9yIChpID0gMDsgaSA8IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBpdGVtID0gb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzW2ldO1xuIFx0XHRcdG1vZHVsZUlkID0gaXRlbS5tb2R1bGU7XG4gXHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xuIFx0XHRcdHRyeSB7XG4gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcbiBcdFx0XHR9IGNhdGNoIChlcnIpIHtcbiBcdFx0XHRcdGlmICh0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuIFx0XHRcdFx0XHR0cnkge1xuIFx0XHRcdFx0XHRcdGl0ZW0uZXJyb3JIYW5kbGVyKGVycik7XG4gXHRcdFx0XHRcdH0gY2F0Y2ggKGVycjIpIHtcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvci1oYW5kbGVyLWVycm9yZWRcIixcbiBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyMixcbiBcdFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxFcnJvcjogZXJyXG4gXHRcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyMjtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3JlZFwiLFxuIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBoYW5kbGUgZXJyb3JzIGluIGFjY2VwdCBoYW5kbGVycyBhbmQgc2VsZiBhY2NlcHRlZCBtb2R1bGUgbG9hZFxuIFx0XHRpZiAoZXJyb3IpIHtcbiBcdFx0XHRob3RTZXRTdGF0dXMoXCJmYWlsXCIpO1xuIFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gXHRcdH1cblxuIFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xuIFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuIFx0XHRcdHJlc29sdmUob3V0ZGF0ZWRNb2R1bGVzKTtcbiBcdFx0fSk7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGhvdDogaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSxcbiBcdFx0XHRwYXJlbnRzOiAoaG90Q3VycmVudFBhcmVudHNUZW1wID0gaG90Q3VycmVudFBhcmVudHMsIGhvdEN1cnJlbnRQYXJlbnRzID0gW10sIGhvdEN1cnJlbnRQYXJlbnRzVGVtcCksXG4gXHRcdFx0Y2hpbGRyZW46IFtdXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9Vc2Vycy9zYWlmdXJyZWhtYW4vRGVza3RvcC9QT0NzL2N1bXVsdXMtYmFuay9hdXRobWljcm9zZXJ2aWNlLW1hcmlhZGIvZGlzdFwiO1xuXG4gXHQvLyBfX3dlYnBhY2tfaGFzaF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSBmdW5jdGlvbigpIHsgcmV0dXJuIGhvdEN1cnJlbnRIYXNoOyB9O1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIGhvdENyZWF0ZVJlcXVpcmUoMCkoX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYmFiZWwvcG9seWZpbGxcIik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKTtcbmNvbnN0IEFwcF8xID0gcmVxdWlyZShcIi4vQXBwXCIpO1xuZGVidWcoJ3RzLWV4cHJlc3M6c2VydmVyJyk7XG5jb25zdCBwb3J0ID0gbm9ybWFsaXplUG9ydCgzMDA0KTtcbkFwcF8xLmRlZmF1bHQuc2V0KCdwb3J0JywgcG9ydCk7XG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihBcHBfMS5kZWZhdWx0KTtcbnNlcnZlci5saXN0ZW4ocG9ydCk7XG5zZXJ2ZXIub24oJ2Vycm9yJywgb25FcnJvcik7XG5zZXJ2ZXIub24oJ2xpc3RlbmluZycsIG9uTGlzdGVuaW5nKTtcbmZ1bmN0aW9uIG5vcm1hbGl6ZVBvcnQodmFsKSB7XG4gICAgbGV0IHBvcnQgPSAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpID8gcGFyc2VJbnQodmFsLCAxMCkgOiB2YWw7XG4gICAgaWYgKGlzTmFOKHBvcnQpKVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIGVsc2UgaWYgKHBvcnQgPj0gMClcbiAgICAgICAgcmV0dXJuIHBvcnQ7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLnN5c2NhbGwgIT09ICdsaXN0ZW4nKVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICBsZXQgYmluZCA9ICh0eXBlb2YgcG9ydCA9PT0gJ3N0cmluZycpID8gJ1BpcGUgJyArIHBvcnQgOiAnUG9ydCAnICsgcG9ydDtcbiAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgY2FzZSAnRUFDQ0VTJzpcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7YmluZH0gcmVxdWlyZXMgZWxldmF0ZWQgcHJpdmlsZWdlc2ApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VBRERSSU5VU0UnOlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHtiaW5kfSBpcyBhbHJlYWR5IGluIHVzZWApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5mdW5jdGlvbiBvbkxpc3RlbmluZygpIHtcbiAgICBsZXQgYWRkciA9IHNlcnZlci5hZGRyZXNzKCk7XG4gICAgbGV0IGJpbmQgPSAodHlwZW9mIGFkZHIgPT09ICdzdHJpbmcnKSA/IGBwaXBlICR7YWRkcn1gIDogYHBvcnQgJHthZGRyLnBvcnR9YDtcbiAgICBkZWJ1ZyhgTGlzdGVuaW5nIG9uICR7YmluZH1gKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZGVidWdcIik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBsb2dnZXIgPSByZXF1aXJlKFwibW9yZ2FuXCIpO1xuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKTtcbmNvbnN0IHBhc3Nwb3J0ID0gcmVxdWlyZShcInBhc3Nwb3J0XCIpO1xuY29uc3QgcGFzc3BvcnRKV1QgPSByZXF1aXJlKFwicGFzc3BvcnQtand0XCIpO1xuY29uc3QgZXBpbWV0aGV1cyA9IHJlcXVpcmUoXCJlcGltZXRoZXVzXCIpO1xuY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcbmNvbnN0IHBhc3N3b3JkaGFzaCA9IHJlcXVpcmUoXCJwYXNzd29yZC1oYXNoXCIpO1xubGV0IG1hcmlhZGIgPSByZXF1aXJlKFwibWFyaWFkYlwiKTtcbmNsYXNzIEFwcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuand0T3B0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLkV4dHJhY3RKd3QgPSBwYXNzcG9ydEpXVC5FeHRyYWN0Snd0O1xuICAgICAgICB0aGlzLkp3dFN0cmF0ZWd5ID0gcGFzc3BvcnRKV1QuRXh0cmFjdEp3dDtcbiAgICAgICAgdGhpcy5uZXdkYXRhID0gW107XG4gICAgICAgIHRoaXMuand0T3B0aW9ucy5qd3RGcm9tUmVxdWVzdCA9IHRoaXMuRXh0cmFjdEp3dC5mcm9tQXV0aEhlYWRlckFzQmVhcmVyVG9rZW4oKTtcbiAgICAgICAgdGhpcy5qd3RPcHRpb25zLnNlY3JldE9yS2V5ID0gXCJwcm9jZXNzLmVudi5TRUNSRVRcIjtcbiAgICAgICAgLy8gdGhpcy5jb25uZWN0aW9uU3RyaW5nID0ge1xuICAgICAgICAvLyAgIGhvc3Q6IHByb2Nlc3MuZW52LkhPU1QsXG4gICAgICAgIC8vICAgdXNlcjogcHJvY2Vzcy5lbnYuVUlELFxuICAgICAgICAvLyAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5QQVNTV09SRCxcbiAgICAgICAgLy8gICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREFUQUJBU0UsXG4gICAgICAgIC8vICAgY29ubmVjdGlvbkxpbWl0OiA1LFxuICAgICAgICAvLyAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlRcbiAgICAgICAgLy8gfTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RyaW5nID0ge1xuICAgICAgICAgICAgaG9zdDogXCJsb2NhbGhvc3RcIixcbiAgICAgICAgICAgIHVzZXI6IFwiYWRtaW5cIixcbiAgICAgICAgICAgIHBhc3N3b3JkOiBcImFkbWluXCIsXG4gICAgICAgICAgICBkYXRhYmFzZTogXCJTQU1QTEVcIixcbiAgICAgICAgICAgIGNvbm5lY3Rpb25MaW1pdDogNSxcbiAgICAgICAgICAgIHBvcnQ6IFwiMzMwNlwiXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9vbCA9IG1hcmlhZGIuY3JlYXRlUG9vbCh0aGlzLmNvbm5lY3Rpb25TdHJpbmcpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbm5lY3Rpb25TdHJpbmcpO1xuICAgICAgICB0aGlzLmV4cHJlc3MgPSBleHByZXNzKCk7XG4gICAgICAgIGVwaW1ldGhldXMuaW5zdHJ1bWVudCh0aGlzLmV4cHJlc3MpO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUoKTtcbiAgICAgICAgdGhpcy5yb3V0ZXMoKTtcbiAgICB9XG4gICAgZW5zdXJlVG9rZW4ocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgY29uc3QgYmVhcmVySGVhZGVyID0gcmVxLmhlYWRlcnNbXCJhdXRob3JpemF0aW9uXCJdO1xuICAgICAgICBpZiAodHlwZW9mIGJlYXJlckhlYWRlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgY29uc3QgYmVhcmVyID0gYmVhcmVySGVhZGVyLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGJlYXJlclRva2VuID0gYmVhcmVyWzFdO1xuICAgICAgICAgICAgcmVxLnRva2VuID0gYmVhcmVyVG9rZW47XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg0MDMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1pZGRsZXdhcmUoKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzcy51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgICAgICByZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsIFwiWC1SZXF1ZXN0ZWQtV2l0aCxjb250ZW50LXR5cGVcIik7XG4gICAgICAgICAgICByZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIkdFVCwgUE9TVCwgT1BUSU9OUywgUFVULCBQQVRDSCwgREVMRVRFXCIpO1xuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShsb2dnZXIoXCJkZXZcIikpO1xuICAgICAgICB0aGlzLmV4cHJlc3MudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShwYXNzcG9ydC5pbml0aWFsaXplKCkpO1xuICAgICAgICB0aGlzLmV4cHJlc3MudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG4gICAgfVxuICAgIHJvdXRlcygpIHtcbiAgICAgICAgbGV0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4gICAgICAgIHJvdXRlci5wb3N0KFwiL2xvZ2luXCIsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wb29sXG4gICAgICAgICAgICAgICAgLmdldENvbm5lY3Rpb24oKVxuICAgICAgICAgICAgICAgIC50aGVuKGNvbm4gPT4ge1xuICAgICAgICAgICAgICAgIGNvbm5cbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5KFwiU0VMRUNUICogRlJPTSBTQU1QTEUuVXNlckRhdGEgV0hFUkUgRW1haWw9P1wiLCBbXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmVtYWlsXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogXCJQbGVhc2Ugc2lnbnVwLCBubyBlbWFpbCBleGlzdHNcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXNzd29yZGhhc2gudmVyaWZ5KHJlcS5ib2R5LnBhc3N3b3JkLCBkYXRhWzBdWydQYXNzd29yZCddKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7IGRhdGE6IGRhdGEgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNlc3NmdWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGp3dC5zaWduKGRhdGEsIFwicHJvY2Vzcy5lbnYuU0VDUkVUXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6IFwiUGFzc3dvcmQvRW1haWwgZGlkIG5vdCBtYXRjaFwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcm91dGVyLnBvc3QoXCIvY3JlYXRlVXNlclwiLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV3ZGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wb29sXG4gICAgICAgICAgICAgICAgLmdldENvbm5lY3Rpb24oKVxuICAgICAgICAgICAgICAgIC50aGVuKGNvbm4gPT4ge1xuICAgICAgICAgICAgICAgIGNvbm5cbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5KFwiaW5zZXJ0IGludG8gU0FNUExFLlVzZXJEYXRhIChMYXN0TmFtZSwgRmlyc3ROYW1lLCBFbWFpbCwgUGFzc3dvcmQsIEFnZSwgTW9iaWxlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkaGFzaC5nZW5lcmF0ZShyZXEuYm9keS5wYXNzd29yZCksXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmFnZSxcbiAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkubW9iaWxlXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3VjZXNzZnVsXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByb3V0ZXIuZ2V0KFwiL2hlYWx0aHpcIiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgICAgICByZXMuc2VuZChcInN1Y2Nlc3NcIik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV4cHJlc3MudXNlKFwiL1wiLCByb3V0ZXIpO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IG5ldyBBcHAoKS5leHByZXNzO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb3JnYW5cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3BvcnRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3BvcnQtand0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImVwaW1ldGhldXNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhc3N3b3JkLWhhc2hcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibWFyaWFkYlwiKTsiXSwic291cmNlUm9vdCI6IiJ9