!function(e){function t(e){var t=require("./"+e+"."+o+".hot-update.js");!function(e,t){if(!w[e]||!g[e])return;for(var r in g[e]=!1,t)Object.prototype.hasOwnProperty.call(t,r)&&(h[r]=t[r]);0==--v&&0===m&&j()}(t.id,t.modules)}var r,n=!0,o="286fa85082f69f50aa3b",s={},i=[],c=[];function a(e){var t=_[e];if(!t)return D;var n=function(n){return t.hot.active?(_[n]?-1===_[n].parents.indexOf(e)&&_[n].parents.push(e):(i=[e],r=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),i=[]),D(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return D[e]},set:function(t){D[e]=t}}};for(var s in D)Object.prototype.hasOwnProperty.call(D,s)&&"e"!==s&&"t"!==s&&Object.defineProperty(n,s,o(s));return n.e=function(e){return"ready"===u&&p("prepare"),m++,D.e(e).then(t,function(e){throw t(),e});function t(){m--,"prepare"===u&&(b[e]||O(e),0===m&&0===v&&j())}},n.t=function(e,t){return 1&t&&(e=n(e)),D.t(e,-2&t)},n}function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,r){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=r||function(){};else t._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._declinedDependencies[e[r]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=t._disposeHandlers.indexOf(e);r>=0&&t._disposeHandlers.splice(r,1)},check:E,apply:P,status:function(e){if(!e)return u;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var t=l.indexOf(e);t>=0&&l.splice(t,1)},data:s[e]};return r=void 0,t}var l=[],u="idle";function p(e){u=e;for(var t=0;t<l.length;t++)l[t].call(null,e)}var f,h,y,v=0,m=0,b={},g={},w={};function x(e){return+e+""===e?+e:e}function E(e){if("idle"!==u)throw new Error("check() is only allowed in idle status");return n=e,p("check"),function(){try{var e=require("./"+o+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return p("idle"),null;g={},b={},w=e.c,y=e.h,p("prepare");var t=new Promise(function(e,t){f={resolve:e,reject:t}});h={};return O(0),"prepare"===u&&0===m&&0===v&&j(),t})}function O(e){w[e]?(g[e]=!0,v++,t(e)):b[e]=!0}function j(){p("ready");var e=f;if(f=null,e)if(n)Promise.resolve().then(function(){return P(n)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&t.push(x(r));e.resolve(t)}}function P(t){if("ready"!==u)throw new Error("apply() is only allowed in ready status");var r,n,c,a,d;function l(e){for(var t=[e],r={},n=t.slice().map(function(e){return{chain:[e],id:e}});n.length>0;){var o=n.pop(),s=o.id,i=o.chain;if((a=_[s])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:s};if(a.hot._main)return{type:"unaccepted",chain:i,moduleId:s};for(var c=0;c<a.parents.length;c++){var d=a.parents[c],l=_[d];if(l){if(l.hot._declinedDependencies[s])return{type:"declined",chain:i.concat([d]),moduleId:s,parentId:d};-1===t.indexOf(d)&&(l.hot._acceptedDependencies[s]?(r[d]||(r[d]=[]),f(r[d],[s])):(delete r[d],t.push(d),n.push({chain:i.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var v={},m=[],b={},g=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var E in h)if(Object.prototype.hasOwnProperty.call(h,E)){var O;d=x(E);var j=!1,P=!1,A=!1,S="";switch((O=h[E]?l(d):{type:"disposed",moduleId:E}).chain&&(S="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(j=new Error("Aborted because of self decline: "+O.moduleId+S));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+S));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(j=new Error("Aborted because "+d+" is not accepted"+S));break;case"accepted":t.onAccepted&&t.onAccepted(O),P=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),A=!0;break;default:throw new Error("Unexception type "+O.type)}if(j)return p("abort"),Promise.reject(j);if(P)for(d in b[d]=h[d],f(m,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,d)&&(v[d]||(v[d]=[]),f(v[d],O.outdatedDependencies[d]));A&&(f(m,[O.moduleId]),b[d]=g)}var q,k=[];for(n=0;n<m.length;n++)d=m[n],_[d]&&_[d].hot._selfAccepted&&k.push({module:d,errorHandler:_[d].hot._selfAccepted});p("dispose"),Object.keys(w).forEach(function(e){!1===w[e]&&function(e){delete installedChunks[e]}(e)});for(var H,I,M=m.slice();M.length>0;)if(d=M.pop(),a=_[d]){var C={},T=a.hot._disposeHandlers;for(c=0;c<T.length;c++)(r=T[c])(C);for(s[d]=C,a.hot.active=!1,delete _[d],delete v[d],c=0;c<a.children.length;c++){var U=_[a.children[c]];U&&((q=U.parents.indexOf(d))>=0&&U.parents.splice(q,1))}}for(d in v)if(Object.prototype.hasOwnProperty.call(v,d)&&(a=_[d]))for(I=v[d],c=0;c<I.length;c++)H=I[c],(q=a.children.indexOf(H))>=0&&a.children.splice(q,1);for(d in p("apply"),o=y,b)Object.prototype.hasOwnProperty.call(b,d)&&(e[d]=b[d]);var R=null;for(d in v)if(Object.prototype.hasOwnProperty.call(v,d)&&(a=_[d])){I=v[d];var L=[];for(n=0;n<I.length;n++)if(H=I[n],r=a.hot._acceptedDependencies[H]){if(-1!==L.indexOf(r))continue;L.push(r)}for(n=0;n<L.length;n++){r=L[n];try{r(I)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:d,dependencyId:I[n],error:e}),t.ignoreErrored||R||(R=e)}}}for(n=0;n<k.length;n++){var N=k[n];d=N.module,i=[d];try{D(d)}catch(e){if("function"==typeof N.errorHandler)try{N.errorHandler(e)}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:d,error:r,originalError:e}),t.ignoreErrored||R||(R=r),R||(R=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:d,error:e}),t.ignoreErrored||R||(R=e)}}return R?(p("fail"),Promise.reject(R)):(p("idle"),new Promise(function(e){e(m)}))}var _={};function D(t){if(_[t])return _[t].exports;var r=_[t]={i:t,l:!1,exports:{},hot:d(t),parents:(c=i,i=[],c),children:[]};return e[t].call(r.exports,r,r.exports,a(t)),r.l=!0,r.exports}D.m=e,D.c=_,D.d=function(e,t,r){D.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},D.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},D.t=function(e,t){if(1&t&&(e=D(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(D.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)D.d(r,n,function(t){return e[t]}.bind(null,n));return r},D.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return D.d(t,"a",t),t},D.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},D.p="/Users/saifurrehman/Desktop/POCs/cumulus-bank/new/Authentication-Microservice/dist",D.h=function(){return o},a(0)(D.s=0)}([function(e,t,r){r(1),e.exports=r(2)},function(e,t){e.exports=require("@babel/polyfill")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3),o=r(4),s=r(5);o("ts-express:server");const i=function(e){let t="string"==typeof e?parseInt(e,10):e;return isNaN(t)?e:t>=0&&t}(3004);s.default.set("port",i);const c=n.createServer(s.default);c.listen(i),c.on("error",function(e){if("listen"!==e.syscall)throw e;let t="string"==typeof i?"Pipe "+i:"Port "+i;switch(e.code){case"EACCES":console.error(`${t} requires elevated privileges`),process.exit(1);break;case"EADDRINUSE":console.error(`${t} is already in use`),process.exit(1);break;default:throw e}}),c.on("listening",function(){let e=c.address(),t="string"==typeof e?`pipe ${e}`:`port ${e.port}`;o(`Listening on ${t}`)})},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("debug")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6),o=r(7),s=r(8),i=r(9),c=r(10),a=r(11),d=r(12),l=r(13);let u=r(14);t.default=(new class{constructor(){this.jwtOptions={},this.ExtractJwt=c.ExtractJwt,this.JwtStrategy=c.ExtractJwt,this.newdata=[],this.jwtOptions.jwtFromRequest=this.ExtractJwt.fromAuthHeaderAsBearerToken(),this.jwtOptions.secretOrKey=process.env.SECRET,this.connectionString={host:"9.30.160.236",user:"admin",password:"admin",database:"SAMPLE",connectionLimit:5,port:"32482"},this.pool=u.createPool(this.connectionString),console.log(this.connectionString),this.express=n(),a.instrument(this.express),this.middleware(),this.routes()}ensureToken(e,t,r){const n=e.headers.authorization;if(void 0!==n){const t=n.split(" ")[1];e.token=t,r()}else t.sendStatus(403)}middleware(){this.express.use(function(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","X-Requested-With,content-type"),t.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),r()}),this.express.use(o("dev")),this.express.use(s.json()),this.express.use(i.initialize()),this.express.use(s.urlencoded({extended:!1}))}routes(){let e=n.Router();e.post("/login",(e,t,r)=>{this.pool.getConnection().then(r=>{r.query("SELECT * FROM SAMPLE.UserData WHERE Email=?",[e.body.email]).then(n=>{n?l.verify(e.body.password,n[0].Password)?(r.end(),console.log(process.env.SECRET),n={data:n},t.json({sucessful:!0,token:d.sign(n,"process.env.SECRET")})):(r.end(),t.status(401).json({message:"Password/Email did not match"})):(r.end(),t.status(401).json({message:"Please signup, no email exists"}))}).catch(e=>{r.end(),e&&(t.status(404).json({err:e}),console.log(e))})}).catch(e=>{e&&(t.status(404).json({err:e}),console.log(e))})}),e.post("/createUser",(e,t,r)=>{this.newdata=[],this.pool.getConnection().then(r=>{r.query("insert into SAMPLE.UserData (LastName, FirstName, Email, Password, Age, Mobile) VALUES (?, ?, ?, ?, ?, ?)",[e.body.lastName,e.body.firstName,e.body.email,l.generate(e.body.password),e.body.age,e.body.mobile]).then(e=>{r.end(),t.json({message:"sucessful"})}).catch(e=>{r.end(),e&&t.status(404).json({err:e})})}).catch(e=>{e&&t.status(404).json({err:e})})}),e.get("/healthz",(e,t,r)=>{t.send("success")}),this.express.use("/",e)}}).express},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("passport-jwt")},function(e,t){e.exports=require("epimetheus")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("password-hash")},function(e,t){e.exports=require("mariadb")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGJhYmVsL3BvbHlmaWxsXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiaHR0cFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImRlYnVnXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJleHByZXNzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9yZ2FuXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYm9keS1wYXJzZXJcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzcG9ydFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcInBhc3Nwb3J0LWp3dFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImVwaW1ldGhldXNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqc29ud2VidG9rZW5cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzd29yZC1oYXNoXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibWFyaWFkYlwiIl0sIm5hbWVzIjpbImhvdERvd25sb2FkVXBkYXRlQ2h1bmsiLCJjaHVua0lkIiwiY2h1bmsiLCJyZXF1aXJlIiwiaG90Q3VycmVudEhhc2giLCJtb3JlTW9kdWxlcyIsImhvdEF2YWlsYWJsZUZpbGVzTWFwIiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJtb2R1bGVJZCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImhvdFVwZGF0ZSIsImhvdFdhaXRpbmdGaWxlcyIsImhvdENodW5rc0xvYWRpbmciLCJob3RVcGRhdGVEb3dubG9hZGVkIiwiaG90QWRkVXBkYXRlQ2h1bmsiLCJpZCIsIm1vZHVsZXMiLCJob3RDdXJyZW50Q2hpbGRNb2R1bGUiLCJob3RBcHBseU9uVXBkYXRlIiwiaG90Q3VycmVudE1vZHVsZURhdGEiLCJob3RDdXJyZW50UGFyZW50cyIsImhvdEN1cnJlbnRQYXJlbnRzVGVtcCIsImhvdENyZWF0ZVJlcXVpcmUiLCJtZSIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZm4iLCJyZXF1ZXN0IiwiaG90IiwiYWN0aXZlIiwicGFyZW50cyIsImluZGV4T2YiLCJwdXNoIiwiY2hpbGRyZW4iLCJjb25zb2xlIiwid2FybiIsIk9iamVjdEZhY3RvcnkiLCJuYW1lIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInNldCIsInZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlIiwiaG90U3RhdHVzIiwiaG90U2V0U3RhdHVzIiwidGhlbiIsImZpbmlzaENodW5rTG9hZGluZyIsImVyciIsImhvdFdhaXRpbmdGaWxlc01hcCIsImhvdEVuc3VyZVVwZGF0ZUNodW5rIiwidCIsIm1vZGUiLCJob3RDcmVhdGVNb2R1bGUiLCJfYWNjZXB0ZWREZXBlbmRlbmNpZXMiLCJfZGVjbGluZWREZXBlbmRlbmNpZXMiLCJfc2VsZkFjY2VwdGVkIiwiX3NlbGZEZWNsaW5lZCIsIl9kaXNwb3NlSGFuZGxlcnMiLCJfbWFpbiIsImFjY2VwdCIsImRlcCIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiaSIsImxlbmd0aCIsImRlY2xpbmUiLCJkaXNwb3NlIiwiYWRkRGlzcG9zZUhhbmRsZXIiLCJyZW1vdmVEaXNwb3NlSGFuZGxlciIsImlkeCIsInNwbGljZSIsImNoZWNrIiwiaG90Q2hlY2siLCJhcHBseSIsImhvdEFwcGx5Iiwic3RhdHVzIiwibCIsImhvdFN0YXR1c0hhbmRsZXJzIiwiYWRkU3RhdHVzSGFuZGxlciIsInJlbW92ZVN0YXR1c0hhbmRsZXIiLCJkYXRhIiwibmV3U3RhdHVzIiwiaG90RGVmZXJyZWQiLCJob3RVcGRhdGVOZXdIYXNoIiwidG9Nb2R1bGVJZCIsIkVycm9yIiwidXBkYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJob3REb3dubG9hZE1hbmlmZXN0IiwiYyIsImgiLCJwcm9taXNlIiwicmVqZWN0IiwiZGVmZXJyZWQiLCJyZXN1bHQiLCJvdXRkYXRlZE1vZHVsZXMiLCJvcHRpb25zIiwiY2IiLCJqIiwibW9kdWxlIiwiZ2V0QWZmZWN0ZWRTdHVmZiIsInVwZGF0ZU1vZHVsZUlkIiwib3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJxdWV1ZSIsInNsaWNlIiwibWFwIiwiY2hhaW4iLCJxdWV1ZUl0ZW0iLCJwb3AiLCJ0eXBlIiwicGFyZW50SWQiLCJwYXJlbnQiLCJjb25jYXQiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImFwcGxpZWRVcGRhdGUiLCJ3YXJuVW5leHBlY3RlZFJlcXVpcmUiLCJhYm9ydEVycm9yIiwiZG9BcHBseSIsImRvRGlzcG9zZSIsImNoYWluSW5mbyIsImpvaW4iLCJvbkRlY2xpbmVkIiwiaWdub3JlRGVjbGluZWQiLCJvblVuYWNjZXB0ZWQiLCJpZ25vcmVVbmFjY2VwdGVkIiwib25BY2NlcHRlZCIsIm9uRGlzcG9zZWQiLCJvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMiLCJlcnJvckhhbmRsZXIiLCJrZXlzIiwiZm9yRWFjaCIsImluc3RhbGxlZENodW5rcyIsImhvdERpc3Bvc2VDaHVuayIsImRlcGVuZGVuY3kiLCJtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyIsImRpc3Bvc2VIYW5kbGVycyIsImNoaWxkIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJvbkVycm9yZWQiLCJkZXBlbmRlbmN5SWQiLCJpZ25vcmVFcnJvcmVkIiwiZXJyMiIsIm9yaWdpbmFsRXJyb3IiLCJleHBvcnRzIiwibSIsImQiLCJnZXR0ZXIiLCJvIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJzIiwiaHR0cCIsImRlYnVnIiwiQXBwXzEiLCJwb3J0IiwidmFsIiwicGFyc2VJbnQiLCJpc05hTiIsIm5vcm1hbGl6ZVBvcnQiLCJkZWZhdWx0Iiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwibGlzdGVuIiwib24iLCJzeXNjYWxsIiwiY29kZSIsInByb2Nlc3MiLCJleGl0IiwiYWRkciIsImFkZHJlc3MiLCJleHByZXNzIiwibG9nZ2VyIiwiYm9keVBhcnNlciIsInBhc3Nwb3J0IiwicGFzc3BvcnRKV1QiLCJlcGltZXRoZXVzIiwiand0IiwicGFzc3dvcmRoYXNoIiwibWFyaWFkYiIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJqd3RPcHRpb25zIiwiRXh0cmFjdEp3dCIsIkp3dFN0cmF0ZWd5IiwibmV3ZGF0YSIsImp3dEZyb21SZXF1ZXN0IiwiZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuIiwic2VjcmV0T3JLZXkiLCJlbnYiLCJTRUNSRVQiLCJjb25uZWN0aW9uU3RyaW5nIiwiaG9zdCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIiwiY29ubmVjdGlvbkxpbWl0IiwicG9vbCIsImNyZWF0ZVBvb2wiLCJsb2ciLCJpbnN0cnVtZW50IiwibWlkZGxld2FyZSIsInJvdXRlcyIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJIZWFkZXIiLCJoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJzcGxpdCIsInRva2VuIiwic2VuZFN0YXR1cyIsInVzZSIsImhlYWRlciIsImpzb24iLCJpbml0aWFsaXplIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicXVlcnkiLCJib2R5IiwiZW1haWwiLCJ2ZXJpZnkiLCJlbmQiLCJzdWNlc3NmdWwiLCJzaWduIiwibWVzc2FnZSIsImNhdGNoIiwibGFzdE5hbWUiLCJmaXJzdE5hbWUiLCJnZW5lcmF0ZSIsImFnZSIsIm1vYmlsZSIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUNBLFNBQUFBLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsUUFBQSxLQUFBRixFQUFBLElBQUFHLEVBQUEsbUJBME9BLFNBQUFI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LE1BQUF0TSxJQUNBQSxHQUNBMkssRUFBQS9JLE9BQUEsS0FBQXlKLEtBQUEsQ0FBMENyTCxZQUkxQ3lMLEVBQUFsTSxJQUFBLFlBQUFtTCxFQUFBQyxFQUFBQyxLQUNBRCxFQUFBaUMsS0FBQSxhQUVBeEQsS0FBQVYsUUFBQXlDLElBQUEsSUFBQU0sTUFHQS9DLHVCQ2pKQXJGLEVBQUFnRCxRQUFBdEosUUFBQSwwQkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSx5QkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSw4QkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSwyQkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSwrQkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSw2QkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSwrQkNBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSxnQ0NBQXNHLEVBQUFnRCxRQUFBdEosUUFBQSIsImZpbGUiOiJidW5kbGUtYmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHR2YXIgY2h1bmsgPSByZXF1aXJlKFwiLi9cIiArIFwiXCIgKyBjaHVua0lkICsgXCIuXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNcIik7XG4gXHRcdGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rLmlkLCBjaHVuay5tb2R1bGVzKTtcbiBcdH1cblxuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KCkge1xuIFx0XHR0cnkge1xuIFx0XHRcdHZhciB1cGRhdGUgPSByZXF1aXJlKFwiLi9cIiArIFwiXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNvblwiKTtcbiBcdFx0fSBjYXRjaCAoZSkge1xuIFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiBcdFx0fVxuIFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVwZGF0ZSk7XG4gXHR9XG5cbiBcdC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHRmdW5jdGlvbiBob3REaXNwb3NlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHRkZWxldGUgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0fVxuXG4gXHR2YXIgaG90QXBwbHlPblVwZGF0ZSA9IHRydWU7XG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiMjg2ZmE4NTA4MmY2OWY1MGFhM2JcIjtcbiBcdHZhciBob3RSZXF1ZXN0VGltZW91dCA9IDEwMDAwO1xuIFx0dmFyIGhvdEN1cnJlbnRNb2R1bGVEYXRhID0ge307XG4gXHR2YXIgaG90Q3VycmVudENoaWxkTW9kdWxlO1xuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTtcbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0dmFyIGhvdEN1cnJlbnRQYXJlbnRzVGVtcCA9IFtdO1xuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHtcbiBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdGlmICghbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xuIFx0XHR2YXIgZm4gPSBmdW5jdGlvbihyZXF1ZXN0KSB7XG4gXHRcdFx0aWYgKG1lLmhvdC5hY3RpdmUpIHtcbiBcdFx0XHRcdGlmIChpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XG4gXHRcdFx0XHRcdGlmIChpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCkgPT09IC0xKSB7XG4gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XG4gXHRcdFx0XHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IHJlcXVlc3Q7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAobWUuY2hpbGRyZW4uaW5kZXhPZihyZXF1ZXN0KSA9PT0gLTEpIHtcbiBcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0Y29uc29sZS53YXJuKFxuIFx0XHRcdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArXG4gXHRcdFx0XHRcdFx0cmVxdWVzdCArXG4gXHRcdFx0XHRcdFx0XCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICtcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZFxuIFx0XHRcdFx0KTtcbiBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XG4gXHRcdFx0fVxuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHJlcXVlc3QpO1xuIFx0XHR9O1xuIFx0XHR2YXIgT2JqZWN0RmFjdG9yeSA9IGZ1bmN0aW9uIE9iamVjdEZhY3RvcnkobmFtZSkge1xuIFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XG4gXHRcdFx0XHR9LFxuIFx0XHRcdFx0c2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuIFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fTtcbiBcdFx0fTtcbiBcdFx0Zm9yICh2YXIgbmFtZSBpbiBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9fd2VicGFja19yZXF1aXJlX18sIG5hbWUpICYmXG4gXHRcdFx0XHRuYW1lICE9PSBcImVcIiAmJlxuIFx0XHRcdFx0bmFtZSAhPT0gXCJ0XCJcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgbmFtZSwgT2JqZWN0RmFjdG9yeShuYW1lKSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGZuLmUgPSBmdW5jdGlvbihjaHVua0lkKSB7XG4gXHRcdFx0aWYgKGhvdFN0YXR1cyA9PT0gXCJyZWFkeVwiKSBob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xuIFx0XHRcdGhvdENodW5rc0xvYWRpbmcrKztcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKGNodW5rSWQpLnRoZW4oZmluaXNoQ2h1bmtMb2FkaW5nLCBmdW5jdGlvbihlcnIpIHtcbiBcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xuIFx0XHRcdFx0dGhyb3cgZXJyO1xuIFx0XHRcdH0pO1xuXG4gXHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xuIFx0XHRcdFx0aG90Q2h1bmtzTG9hZGluZy0tO1xuIFx0XHRcdFx0aWYgKGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIpIHtcbiBcdFx0XHRcdFx0aWYgKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcbiBcdFx0XHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH07XG4gXHRcdGZuLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRcdGlmIChtb2RlICYgMSkgdmFsdWUgPSBmbih2YWx1ZSk7XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18udCh2YWx1ZSwgbW9kZSAmIH4xKTtcbiBcdFx0fTtcbiBcdFx0cmV0dXJuIGZuO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkge1xuIFx0XHR2YXIgaG90ID0ge1xuIFx0XHRcdC8vIHByaXZhdGUgc3R1ZmZcbiBcdFx0XHRfYWNjZXB0ZWREZXBlbmRlbmNpZXM6IHt9LFxuIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXG4gXHRcdFx0X3NlbGZBY2NlcHRlZDogZmFsc2UsXG4gXHRcdFx0X3NlbGZEZWNsaW5lZDogZmFsc2UsXG4gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXG4gXHRcdFx0X21haW46IGhvdEN1cnJlbnRDaGlsZE1vZHVsZSAhPT0gbW9kdWxlSWQsXG5cbiBcdFx0XHQvLyBNb2R1bGUgQVBJXG4gXHRcdFx0YWN0aXZlOiB0cnVlLFxuIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xuIFx0XHRcdFx0aWYgKGRlcCA9PT0gdW5kZWZpbmVkKSBob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpIGhvdC5fc2VsZkFjY2VwdGVkID0gZGVwO1xuIFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIilcbiBcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXG4gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcbiBcdFx0XHRcdGVsc2UgaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcbiBcdFx0XHR9LFxuIFx0XHRcdGRlY2xpbmU6IGZ1bmN0aW9uKGRlcCkge1xuIFx0XHRcdFx0aWYgKGRlcCA9PT0gdW5kZWZpbmVkKSBob3QuX3NlbGZEZWNsaW5lZCA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuIFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcbiBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xuIFx0XHRcdFx0ZWxzZSBob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xuIFx0XHRcdH0sXG4gXHRcdFx0ZGlzcG9zZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuIFx0XHRcdH0sXG4gXHRcdFx0YWRkRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcbiBcdFx0XHR9LFxuIFx0XHRcdHJlbW92ZURpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHR9LFxuXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXG4gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xuIFx0XHRcdFx0aWYgKCFsKSByZXR1cm4gaG90U3RhdHVzO1xuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbiBcdFx0XHR9LFxuIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG4gXHRcdFx0fSxcbiBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0fSxcblxuIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxuIFx0XHR9O1xuIFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XG4gXHRcdHJldHVybiBob3Q7XG4gXHR9XG5cbiBcdHZhciBob3RTdGF0dXNIYW5kbGVycyA9IFtdO1xuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xuXG4gXHRmdW5jdGlvbiBob3RTZXRTdGF0dXMobmV3U3RhdHVzKSB7XG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcbiBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XG4gXHR9XG5cbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcbiBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuIFx0dmFyIGhvdEF2YWlsYWJsZUZpbGVzTWFwID0ge307XG4gXHR2YXIgaG90RGVmZXJyZWQ7XG5cbiBcdC8vIFRoZSB1cGRhdGUgaW5mb1xuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcblxuIFx0ZnVuY3Rpb24gdG9Nb2R1bGVJZChpZCkge1xuIFx0XHR2YXIgaXNOdW1iZXIgPSAraWQgKyBcIlwiID09PSBpZDtcbiBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5KSB7XG4gXHRcdGlmIChob3RTdGF0dXMgIT09IFwiaWRsZVwiKSB7XG4gXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiY2hlY2soKSBpcyBvbmx5IGFsbG93ZWQgaW4gaWRsZSBzdGF0dXNcIik7XG4gXHRcdH1cbiBcdFx0aG90QXBwbHlPblVwZGF0ZSA9IGFwcGx5O1xuIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcbiBcdFx0cmV0dXJuIGhvdERvd25sb2FkTWFuaWZlc3QoaG90UmVxdWVzdFRpbWVvdXQpLnRoZW4oZnVuY3Rpb24odXBkYXRlKSB7XG4gXHRcdFx0aWYgKCF1cGRhdGUpIHtcbiBcdFx0XHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XG4gXHRcdFx0XHRyZXR1cm4gbnVsbDtcbiBcdFx0XHR9XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xuIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcblxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdGhvdERlZmVycmVkID0ge1xuIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxuIFx0XHRcdFx0XHRyZWplY3Q6IHJlamVjdFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHR2YXIgY2h1bmtJZCA9IDA7XG4gXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvbmUtYmxvY2tzXG4gXHRcdFx0e1xuIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cbiBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmXG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nID09PSAwICYmXG4gXHRcdFx0XHRob3RXYWl0aW5nRmlsZXMgPT09IDBcbiBcdFx0XHQpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIHByb21pc2U7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdGlmICghaG90QXZhaWxhYmxlRmlsZXNNYXBbY2h1bmtJZF0gfHwgIWhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdKVxuIFx0XHRcdHJldHVybjtcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcbiBcdFx0Zm9yICh2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdGhvdFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmICgtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XG4gXHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0aWYgKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xuIFx0XHRcdGhvdFdhaXRpbmdGaWxlcysrO1xuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90VXBkYXRlRG93bmxvYWRlZCgpIHtcbiBcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XG4gXHRcdHZhciBkZWZlcnJlZCA9IGhvdERlZmVycmVkO1xuIFx0XHRob3REZWZlcnJlZCA9IG51bGw7XG4gXHRcdGlmICghZGVmZXJyZWQpIHJldHVybjtcbiBcdFx0aWYgKGhvdEFwcGx5T25VcGRhdGUpIHtcbiBcdFx0XHQvLyBXcmFwIGRlZmVycmVkIG9iamVjdCBpbiBQcm9taXNlIHRvIG1hcmsgaXQgYXMgYSB3ZWxsLWhhbmRsZWQgUHJvbWlzZSB0b1xuIFx0XHRcdC8vIGF2b2lkIHRyaWdnZXJpbmcgdW5jYXVnaHQgZXhjZXB0aW9uIHdhcm5pbmcgaW4gQ2hyb21lLlxuIFx0XHRcdC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NjU2NjZcbiBcdFx0XHRQcm9taXNlLnJlc29sdmUoKVxuIFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHRcdHJldHVybiBob3RBcHBseShob3RBcHBseU9uVXBkYXRlKTtcbiBcdFx0XHRcdH0pXG4gXHRcdFx0XHQudGhlbihcbiBcdFx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XG4gXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuIFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcbiBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0KTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG4gXHRcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4gXHRcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHR9XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJyZWFkeVwiKVxuIFx0XHRcdHRocm93IG5ldyBFcnJvcihcImFwcGx5KCkgaXMgb25seSBhbGxvd2VkIGluIHJlYWR5IHN0YXR1c1wiKTtcbiBcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiBcdFx0dmFyIGNiO1xuIFx0XHR2YXIgaTtcbiBcdFx0dmFyIGo7XG4gXHRcdHZhciBtb2R1bGU7XG4gXHRcdHZhciBtb2R1bGVJZDtcblxuIFx0XHRmdW5jdGlvbiBnZXRBZmZlY3RlZFN0dWZmKHVwZGF0ZU1vZHVsZUlkKSB7XG4gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFt1cGRhdGVNb2R1bGVJZF07XG4gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG5cbiBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKS5tYXAoZnVuY3Rpb24oaWQpIHtcbiBcdFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHRcdGNoYWluOiBbaWRdLFxuIFx0XHRcdFx0XHRpZDogaWRcbiBcdFx0XHRcdH07XG4gXHRcdFx0fSk7XG4gXHRcdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiBcdFx0XHRcdHZhciBxdWV1ZUl0ZW0gPSBxdWV1ZS5wb3AoKTtcbiBcdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlSXRlbS5pZDtcbiBcdFx0XHRcdHZhciBjaGFpbiA9IHF1ZXVlSXRlbS5jaGFpbjtcbiBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0aWYgKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKSBjb250aW51ZTtcbiBcdFx0XHRcdGlmIChtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtZGVjbGluZWRcIixcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAobW9kdWxlLmhvdC5fbWFpbikge1xuIFx0XHRcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwidW5hY2NlcHRlZFwiLFxuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XG4gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcbiBcdFx0XHRcdFx0aWYgKCFwYXJlbnQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0XHRpZiAocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHRcdHR5cGU6IFwiZGVjbGluZWRcIixcbiBcdFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4gXHRcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdFx0XHRwYXJlbnRJZDogcGFyZW50SWRcbiBcdFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgIT09IC0xKSBjb250aW51ZTtcbiBcdFx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuIFx0XHRcdFx0XHRcdGlmICghb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdKVxuIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcbiBcdFx0XHRcdFx0XHRjb250aW51ZTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaChwYXJlbnRJZCk7XG4gXHRcdFx0XHRcdHF1ZXVlLnB1c2goe1xuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4gXHRcdFx0XHRcdFx0aWQ6IHBhcmVudElkXG4gXHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cblxuIFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHR0eXBlOiBcImFjY2VwdGVkXCIsXG4gXHRcdFx0XHRtb2R1bGVJZDogdXBkYXRlTW9kdWxlSWQsXG4gXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXM6IG91dGRhdGVkTW9kdWxlcyxcbiBcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzOiBvdXRkYXRlZERlcGVuZGVuY2llc1xuIFx0XHRcdH07XG4gXHRcdH1cblxuIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XG4gXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHR2YXIgaXRlbSA9IGJbaV07XG4gXHRcdFx0XHRpZiAoYS5pbmRleE9mKGl0ZW0pID09PSAtMSkgYS5wdXNoKGl0ZW0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXG4gXHRcdC8vIHRoZSBcIm91dGRhdGVkXCIgc3RhdHVzIGNhbiBwcm9wYWdhdGUgdG8gcGFyZW50cyBpZiB0aGV5IGRvbid0IGFjY2VwdCB0aGUgY2hpbGRyZW5cbiBcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG4gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0dmFyIGFwcGxpZWRVcGRhdGUgPSB7fTtcblxuIFx0XHR2YXIgd2FyblVuZXhwZWN0ZWRSZXF1aXJlID0gZnVuY3Rpb24gd2FyblVuZXhwZWN0ZWRSZXF1aXJlKCkge1xuIFx0XHRcdGNvbnNvbGUud2FybihcbiBcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVzdWx0Lm1vZHVsZUlkICsgXCIpIHRvIGRpc3Bvc2VkIG1vZHVsZVwiXG4gXHRcdFx0KTtcbiBcdFx0fTtcblxuIFx0XHRmb3IgKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVJZCA9IHRvTW9kdWxlSWQoaWQpO1xuIFx0XHRcdFx0LyoqIEB0eXBlIHtUT0RPfSAqL1xuIFx0XHRcdFx0dmFyIHJlc3VsdDtcbiBcdFx0XHRcdGlmIChob3RVcGRhdGVbaWRdKSB7XG4gXHRcdFx0XHRcdHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xuIFx0XHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdFx0cmVzdWx0ID0ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwiZGlzcG9zZWRcIixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogaWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdC8qKiBAdHlwZSB7RXJyb3J8ZmFsc2V9ICovXG4gXHRcdFx0XHR2YXIgYWJvcnRFcnJvciA9IGZhbHNlO1xuIFx0XHRcdFx0dmFyIGRvQXBwbHkgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBkb0Rpc3Bvc2UgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBjaGFpbkluZm8gPSBcIlwiO1xuIFx0XHRcdFx0aWYgKHJlc3VsdC5jaGFpbikge1xuIFx0XHRcdFx0XHRjaGFpbkluZm8gPSBcIlxcblVwZGF0ZSBwcm9wYWdhdGlvbjogXCIgKyByZXN1bHQuY2hhaW4uam9pbihcIiAtPiBcIik7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRzd2l0Y2ggKHJlc3VsdC50eXBlKSB7XG4gXHRcdFx0XHRcdGNhc2UgXCJzZWxmLWRlY2xpbmVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EZWNsaW5lZCkgb3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbiBcdFx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2Ugb2Ygc2VsZiBkZWNsaW5lOiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJkZWNsaW5lZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG4gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIGRlY2xpbmVkIGRlcGVuZGVuY3k6IFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdFwiIGluIFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQucGFyZW50SWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcInVuYWNjZXB0ZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vblVuYWNjZXB0ZWQpIG9wdGlvbnMub25VbmFjY2VwdGVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZVVuYWNjZXB0ZWQpXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIgKyBjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJhY2NlcHRlZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uQWNjZXB0ZWQpIG9wdGlvbnMub25BY2NlcHRlZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGRvQXBwbHkgPSB0cnVlO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiZGlzcG9zZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRpc3Bvc2VkKSBvcHRpb25zLm9uRGlzcG9zZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRkb0Rpc3Bvc2UgPSB0cnVlO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRkZWZhdWx0OlxuIFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVuZXhjZXB0aW9uIHR5cGUgXCIgKyByZXN1bHQudHlwZSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAoYWJvcnRFcnJvcikge1xuIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcbiBcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGFib3J0RXJyb3IpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKGRvQXBwbHkpIHtcbiBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSBob3RVcGRhdGVbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdC5vdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHRcdFx0XHRmb3IgKG1vZHVsZUlkIGluIHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdFx0XHRcdGlmIChcbiBcdFx0XHRcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzLFxuIFx0XHRcdFx0XHRcdFx0XHRtb2R1bGVJZFxuIFx0XHRcdFx0XHRcdFx0KVxuIFx0XHRcdFx0XHRcdCkge1xuIFx0XHRcdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pXG4gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xuIFx0XHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQoXG4gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSxcbiBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXVxuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChkb0Rpc3Bvc2UpIHtcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCBbcmVzdWx0Lm1vZHVsZUlkXSk7XG4gXHRcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gd2FyblVuZXhwZWN0ZWRSZXF1aXJlO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cbiBcdFx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xuIFx0XHRmb3IgKGkgPSAwOyBpIDwgb3V0ZGF0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0bW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gJiZcbiBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG4gXHRcdFx0KVxuIFx0XHRcdFx0b3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLnB1c2goe1xuIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG4gXHRcdFx0XHR9KTtcbiBcdFx0fVxuXG4gXHRcdC8vIE5vdyBpbiBcImRpc3Bvc2VcIiBwaGFzZVxuIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xuIFx0XHRPYmplY3Qua2V5cyhob3RBdmFpbGFibGVGaWxlc01hcCkuZm9yRWFjaChmdW5jdGlvbihjaHVua0lkKSB7XG4gXHRcdFx0aWYgKGhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdID09PSBmYWxzZSkge1xuIFx0XHRcdFx0aG90RGlzcG9zZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdH1cbiBcdFx0fSk7XG5cbiBcdFx0dmFyIGlkeDtcbiBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XG4gXHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gXHRcdFx0bW9kdWxlSWQgPSBxdWV1ZS5wb3AoKTtcbiBcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRpZiAoIW1vZHVsZSkgY29udGludWU7XG5cbiBcdFx0XHR2YXIgZGF0YSA9IHt9O1xuXG4gXHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXG4gXHRcdFx0dmFyIGRpc3Bvc2VIYW5kbGVycyA9IG1vZHVsZS5ob3QuX2Rpc3Bvc2VIYW5kbGVycztcbiBcdFx0XHRmb3IgKGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHRjYiA9IGRpc3Bvc2VIYW5kbGVyc1tqXTtcbiBcdFx0XHRcdGNiKGRhdGEpO1xuIFx0XHRcdH1cbiBcdFx0XHRob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF0gPSBkYXRhO1xuXG4gXHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcbiBcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xuXG4gXHRcdFx0Ly8gcmVtb3ZlIG1vZHVsZSBmcm9tIGNhY2hlXG4gXHRcdFx0ZGVsZXRlIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuXG4gXHRcdFx0Ly8gd2hlbiBkaXNwb3NpbmcgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGRpc3Bvc2UgaGFuZGxlclxuIFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG5cbiBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxuIFx0XHRcdGZvciAoaiA9IDA7IGogPCBtb2R1bGUuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBjaGlsZCA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcbiBcdFx0XHRcdGlmICghY2hpbGQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0aWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkge1xuIFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXG4gXHRcdHZhciBkZXBlbmRlbmN5O1xuIFx0XHR2YXIgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXM7XG4gXHRcdGZvciAobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKVxuIFx0XHRcdCkge1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAobW9kdWxlKSB7XG4gXHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XG4gXHRcdFx0XHRcdFx0aWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XG4gXHRcdFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBtb2R1bGUuY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBOb3QgaW4gXCJhcHBseVwiIHBoYXNlXG4gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xuXG4gXHRcdGhvdEN1cnJlbnRIYXNoID0gaG90VXBkYXRlTmV3SGFzaDtcblxuIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XG4gXHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcHBsaWVkVXBkYXRlLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcbiBcdFx0dmFyIGVycm9yID0gbnVsbDtcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpXG4gXHRcdFx0KSB7XG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdGlmIChtb2R1bGUpIHtcbiBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdHZhciBjYWxsYmFja3MgPSBbXTtcbiBcdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldO1xuIFx0XHRcdFx0XHRcdGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XG4gXHRcdFx0XHRcdFx0aWYgKGNiKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2tzLmluZGV4T2YoY2IpICE9PSAtMSkgY29udGludWU7XG4gXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0XHRjYiA9IGNhbGxiYWNrc1tpXTtcbiBcdFx0XHRcdFx0XHR0cnkge1xuIFx0XHRcdFx0XHRcdFx0Y2IobW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMpO1xuIFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuIFx0XHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImFjY2VwdC1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3lJZDogbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV0sXG4gXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIExvYWQgc2VsZiBhY2NlcHRlZCBtb2R1bGVzXG4gXHRcdGZvciAoaSA9IDA7IGkgPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcbiBcdFx0XHRtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xuIFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcbiBcdFx0XHR0cnkge1xuIFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XG4gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4gXHRcdFx0XHRpZiAodHlwZW9mIGl0ZW0uZXJyb3JIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiBcdFx0XHRcdFx0dHJ5IHtcbiBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xuIFx0XHRcdFx0XHR9IGNhdGNoIChlcnIyKSB7XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3ItaGFuZGxlci1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVycjIsXG4gXHRcdFx0XHRcdFx0XHRcdG9yaWdpbmFsRXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjI7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG4gXHRcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtYWNjZXB0LWVycm9yZWRcIixcbiBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbiBcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcbiBcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gaGFuZGxlIGVycm9ycyBpbiBhY2NlcHQgaGFuZGxlcnMgYW5kIHNlbGYgYWNjZXB0ZWQgbW9kdWxlIGxvYWRcbiBcdFx0aWYgKGVycm9yKSB7XG4gXHRcdFx0aG90U2V0U3RhdHVzKFwiZmFpbFwiKTtcbiBcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuIFx0XHR9XG5cbiBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcbiBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiBcdFx0XHRyZXNvbHZlKG91dGRhdGVkTW9kdWxlcyk7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRob3Q6IGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCksXG4gXHRcdFx0cGFyZW50czogKGhvdEN1cnJlbnRQYXJlbnRzVGVtcCA9IGhvdEN1cnJlbnRQYXJlbnRzLCBob3RDdXJyZW50UGFyZW50cyA9IFtdLCBob3RDdXJyZW50UGFyZW50c1RlbXApLFxuIFx0XHRcdGNoaWxkcmVuOiBbXVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBob3RDcmVhdGVSZXF1aXJlKG1vZHVsZUlkKSk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvVXNlcnMvc2FpZnVycmVobWFuL0Rlc2t0b3AvUE9Dcy9jdW11bHVzLWJhbmsvbmV3L0F1dGhlbnRpY2F0aW9uLU1pY3Jvc2VydmljZS9kaXN0XCI7XG5cbiBcdC8vIF9fd2VicGFja19oYXNoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18uaCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gaG90Q3VycmVudEhhc2g7IH07XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gaG90Q3JlYXRlUmVxdWlyZSgwKShfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9wb2x5ZmlsbFwiKTsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGh0dHAgPSByZXF1aXJlKFwiaHR0cFwiKTtcbmNvbnN0IGRlYnVnID0gcmVxdWlyZShcImRlYnVnXCIpO1xuY29uc3QgQXBwXzEgPSByZXF1aXJlKFwiLi9BcHBcIik7XG5kZWJ1ZygndHMtZXhwcmVzczpzZXJ2ZXInKTtcbmNvbnN0IHBvcnQgPSBub3JtYWxpemVQb3J0KDMwMDQpO1xuQXBwXzEuZGVmYXVsdC5zZXQoJ3BvcnQnLCBwb3J0KTtcbmNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKEFwcF8xLmRlZmF1bHQpO1xuc2VydmVyLmxpc3Rlbihwb3J0KTtcbnNlcnZlci5vbignZXJyb3InLCBvbkVycm9yKTtcbnNlcnZlci5vbignbGlzdGVuaW5nJywgb25MaXN0ZW5pbmcpO1xuZnVuY3Rpb24gbm9ybWFsaXplUG9ydCh2YWwpIHtcbiAgICBsZXQgcG9ydCA9ICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgPyBwYXJzZUludCh2YWwsIDEwKSA6IHZhbDtcbiAgICBpZiAoaXNOYU4ocG9ydCkpXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgZWxzZSBpZiAocG9ydCA+PSAwKVxuICAgICAgICByZXR1cm4gcG9ydDtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3Iuc3lzY2FsbCAhPT0gJ2xpc3RlbicpXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIGxldCBiaW5kID0gKHR5cGVvZiBwb3J0ID09PSAnc3RyaW5nJykgPyAnUGlwZSAnICsgcG9ydCA6ICdQb3J0ICcgKyBwb3J0O1xuICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICBjYXNlICdFQUNDRVMnOlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHtiaW5kfSByZXF1aXJlcyBlbGV2YXRlZCBwcml2aWxlZ2VzYCk7XG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRUFERFJJTlVTRSc6XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGAke2JpbmR9IGlzIGFscmVhZHkgaW4gdXNlYCk7XG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG9uTGlzdGVuaW5nKCkge1xuICAgIGxldCBhZGRyID0gc2VydmVyLmFkZHJlc3MoKTtcbiAgICBsZXQgYmluZCA9ICh0eXBlb2YgYWRkciA9PT0gJ3N0cmluZycpID8gYHBpcGUgJHthZGRyfWAgOiBgcG9ydCAke2FkZHIucG9ydH1gO1xuICAgIGRlYnVnKGBMaXN0ZW5pbmcgb24gJHtiaW5kfWApO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaHR0cFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKTsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IGxvZ2dlciA9IHJlcXVpcmUoXCJtb3JnYW5cIik7XG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpO1xuY29uc3QgcGFzc3BvcnQgPSByZXF1aXJlKFwicGFzc3BvcnRcIik7XG5jb25zdCBwYXNzcG9ydEpXVCA9IHJlcXVpcmUoXCJwYXNzcG9ydC1qd3RcIik7XG5jb25zdCBlcGltZXRoZXVzID0gcmVxdWlyZShcImVwaW1ldGhldXNcIik7XG5jb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xuY29uc3QgcGFzc3dvcmRoYXNoID0gcmVxdWlyZShcInBhc3N3b3JkLWhhc2hcIik7XG5sZXQgbWFyaWFkYiA9IHJlcXVpcmUoXCJtYXJpYWRiXCIpO1xuY2xhc3MgQXBwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5qd3RPcHRpb25zID0ge307XG4gICAgICAgIHRoaXMuRXh0cmFjdEp3dCA9IHBhc3Nwb3J0SldULkV4dHJhY3RKd3Q7XG4gICAgICAgIHRoaXMuSnd0U3RyYXRlZ3kgPSBwYXNzcG9ydEpXVC5FeHRyYWN0Snd0O1xuICAgICAgICB0aGlzLm5ld2RhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5qd3RPcHRpb25zLmp3dEZyb21SZXF1ZXN0ID0gdGhpcy5FeHRyYWN0Snd0LmZyb21BdXRoSGVhZGVyQXNCZWFyZXJUb2tlbigpO1xuICAgICAgICB0aGlzLmp3dE9wdGlvbnMuc2VjcmV0T3JLZXkgPSBwcm9jZXNzLmVudi5TRUNSRVQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblN0cmluZyA9IHtcbiAgICAgICAgICAgIGhvc3Q6ICc5LjMwLjE2MC4yMzYnLFxuICAgICAgICAgICAgdXNlcjogJ2FkbWluJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnYWRtaW4nLFxuICAgICAgICAgICAgZGF0YWJhc2U6ICdTQU1QTEUnLFxuICAgICAgICAgICAgY29ubmVjdGlvbkxpbWl0OiA1LFxuICAgICAgICAgICAgcG9ydDogJzMyNDgyJ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvb2wgPSBtYXJpYWRiLmNyZWF0ZVBvb2wodGhpcy5jb25uZWN0aW9uU3RyaW5nKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5jb25uZWN0aW9uU3RyaW5nKTtcbiAgICAgICAgdGhpcy5leHByZXNzID0gZXhwcmVzcygpO1xuICAgICAgICBlcGltZXRoZXVzLmluc3RydW1lbnQodGhpcy5leHByZXNzKTtcbiAgICAgICAgdGhpcy5taWRkbGV3YXJlKCk7XG4gICAgICAgIHRoaXMucm91dGVzKCk7XG4gICAgfVxuICAgIGVuc3VyZVRva2VuKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIGNvbnN0IGJlYXJlckhlYWRlciA9IHJlcS5oZWFkZXJzW1wiYXV0aG9yaXphdGlvblwiXTtcbiAgICAgICAgaWYgKHR5cGVvZiBiZWFyZXJIZWFkZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGJlYXJlciA9IGJlYXJlckhlYWRlci5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICBjb25zdCBiZWFyZXJUb2tlbiA9IGJlYXJlclsxXTtcbiAgICAgICAgICAgIHJlcS50b2tlbiA9IGJlYXJlclRva2VuO1xuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNDAzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaWRkbGV3YXJlKCkge1xuICAgICAgICB0aGlzLmV4cHJlc3MudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICAgICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBcIipcIik7XG4gICAgICAgICAgICByZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLCBcIlgtUmVxdWVzdGVkLVdpdGgsY29udGVudC10eXBlXCIpO1xuICAgICAgICAgICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHNcIiwgXCJHRVQsIFBPU1QsIE9QVElPTlMsIFBVVCwgUEFUQ0gsIERFTEVURVwiKTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhwcmVzcy51c2UobG9nZ2VyKFwiZGV2XCIpKTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4gICAgICAgIHRoaXMuZXhwcmVzcy51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuICAgIH1cbiAgICByb3V0ZXMoKSB7XG4gICAgICAgIGxldCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuICAgICAgICByb3V0ZXIucG9zdChcIi9sb2dpblwiLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9vbFxuICAgICAgICAgICAgICAgIC5nZXRDb25uZWN0aW9uKClcbiAgICAgICAgICAgICAgICAudGhlbihjb25uID0+IHtcbiAgICAgICAgICAgICAgICBjb25uXG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeShcIlNFTEVDVCAqIEZST00gU0FNUExFLlVzZXJEYXRhIFdIRVJFIEVtYWlsPT9cIiwgW1xuICAgICAgICAgICAgICAgICAgICByZXEuYm9keS5lbWFpbFxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6IFwiUGxlYXNlIHNpZ251cCwgbm8gZW1haWwgZXhpc3RzXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFzc3dvcmRoYXNoLnZlcmlmeShyZXEuYm9keS5wYXNzd29yZCwgZGF0YVswXVsnUGFzc3dvcmQnXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9jZXNzLmVudi5TRUNSRVQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsgZGF0YTogZGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Vzc2Z1bDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogand0LnNpZ24oZGF0YSwgJ3Byb2Nlc3MuZW52LlNFQ1JFVCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhdHVzKDQwMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuanNvbih7IG1lc3NhZ2U6IFwiUGFzc3dvcmQvRW1haWwgZGlkIG5vdCBtYXRjaFwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcm91dGVyLnBvc3QoXCIvY3JlYXRlVXNlclwiLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV3ZGF0YSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wb29sXG4gICAgICAgICAgICAgICAgLmdldENvbm5lY3Rpb24oKVxuICAgICAgICAgICAgICAgIC50aGVuKGNvbm4gPT4ge1xuICAgICAgICAgICAgICAgIGNvbm5cbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5KFwiaW5zZXJ0IGludG8gU0FNUExFLlVzZXJEYXRhIChMYXN0TmFtZSwgRmlyc3ROYW1lLCBFbWFpbCwgUGFzc3dvcmQsIEFnZSwgTW9iaWxlKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkaGFzaC5nZW5lcmF0ZShyZXEuYm9keS5wYXNzd29yZCksXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmFnZSxcbiAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkubW9iaWxlXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3VjZXNzZnVsXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByb3V0ZXIuZ2V0KFwiL2hlYWx0aHpcIiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgICAgICByZXMuc2VuZChcInN1Y2Nlc3NcIik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV4cHJlc3MudXNlKFwiL1wiLCByb3V0ZXIpO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IG5ldyBBcHAoKS5leHByZXNzO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb3JnYW5cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3BvcnRcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3BvcnQtand0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImVwaW1ldGhldXNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhc3N3b3JkLWhhc2hcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibWFyaWFkYlwiKTsiXSwic291cmNlUm9vdCI6IiJ9